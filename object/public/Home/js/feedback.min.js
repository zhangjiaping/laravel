!function(t){function a(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}var e={};return a.m=t,a.c=e,a.p="",a(0)}([function(t,a,e){t.exports=e(1)},function(t,a){MI.feedback=function(){function t(){return n.submitData.type?n.submitData.question?n.submitData.answer&&n.submitData.token?(n.submitData.url||(n.submitData.url=""),void $.ajax({url:n.urls.submitUrl,dataType:"jsonp",data:{type:n.submitData.type,feedback:n.submitData.question+n.submitData.url,answer:n.submitData.answer,token:n.submitData.token},jsonp:"jsonpcallback",timeout:1e4,error:function(){e("网络超时，请刷新页面重试！")},success:function(t){t&&0===t.code?e("提交成功，感谢你的反馈！",!0):e(t.msg)}})):($("#captcha_code").trigger("error",["请输入验证码"]).focus(),!1):($("#feedbackQuestion").trigger("error",["请输入您遇到的问题"]).focus(),!1):(e("请选择问题类型！"),!1)}function a(){var t=$("#captchaCode"),a=function(){t.trigger("error",["请输入正确验证码"]),$("#J_captchaChange").trigger("click"),n.submitData.answer=""};t.on("blur",function(){var r=$.trim($(this).val());if(r){var i=n.urls.checkCaptchaUrl+r+"&v="+Math.random();n.submitData.answer=r,$.ajax({type:"post",url:i,dataType:"jsonp",jsonp:"callback",timeout:1e4,error:function(){e("抱歉！验证失败，请刷新页面重试!")},success:function(e){e.data&&e.data.result&&e.data.result===!0&&e.data.token?(t.trigger("valid"),n.submitData.token=e.data.token):a()}})}else a()})}function e(t,a){t?(a?$("#J_go").removeClass("hide").siblings("button").hide():$("#J_go").addClass("hide").siblings("button").show(),$("#J_modalAlert").on("show.bs.modal",function(){$("#J_alertMsg").html(t)}).modal("show").removeClass("hide").one("hide.bs.modal",function(){$(this).addClass("hide"),$("#J_alertMsg").html("")})):$("#J_modalAlert").modal("hide")}function r(t){return String(t).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function i(){MI.form.init(),$("#J_captchaImg").attr("src",n.urls.captchaUrl+Math.random()),$("#J_captchaChange").on("click",function(){$("#J_captchaImg").attr("src",n.urls.captchaUrl+Math.random())}),$("#J_submitQuestion").on("click",function(){return t(),!1}),$("#feedbackType").on("change",function(){var t=$(this).val();n.submitData.type="0"!==t?t:""}),$("#feedbackQuestion").on("blur",function(){var t=$.trim($(this).val());n.submitData.question=r(t)}),$("#feedbackQuestionUrl").on("blur",function(){var t=$.trim($(this).val()),a=/http:\/\/[A-Za-z0-9\.-]{3,}\.[A-Za-z]{3}/;""===t||a.test(t)?(n.submitData.url=t,$(this).trigger("valid")):$(this).trigger("error",["请输入正确的页面链接"])}),a(),$.cookie("userId")||$("#J_loginTip").removeClass("hide").find("a").attr("href",MI.setLoginInfo.orderUrl+"?redirectUrl="+location.href)}var n={urls:{submitUrl:MI.GLOBAL_CONFIG.orderSite+"/feedback/add",captchaUrl:"//captcha.hd.mi.com/captcha?style=chinese&service=xmevent.mi.com&sessionId=​",checkCaptchaUrl:"//captcha.hd.mi.com/captcha/auth?service=xmevent.mi.com&answer="},submitData:{type:"",question:"",url:"",answer:"",token:""}};i()},$(document).ready(function(){MI.feedback()})}]);