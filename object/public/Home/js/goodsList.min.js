!function(t){function e(i){if(a[i])return a[i].exports;var o=a[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){t.exports=a(1)},function(t,e,a){a(2),a(3),a(6),function(t){function e(a){var i,o,s=a;return 0===s.length?s:s.length>1?(s.each(function(){e(t(this))}),s):(s.addClass("filter-list-row-"+Math.ceil(s.find("dd").length/6)),i=s.closest(".filter-list-wrap"),o=t('<a class="more J_filterToggle" href="javascript: void(0);">更多<i class="iconfont">&#xe61c;</i></a>').appendTo(i),void o.on("click",function(){i.toggleClass("filter-list-wrap-toggled")}))}function a(){"string"==typeof SEARCH_WORDS&&(t("#search").val(t("<div>").html(SEARCH_WORDS).text()),t("#J_searchForm").find(".search-hot-words").hide())}var i=t(".filter-list"),o=t(".filter-list-wrap"),s=t(".J_filterListToggle"),n=t(".thumb-list");a(),e(i.filter(function(){return t(this).find("> dd").length>6})),s.on("click",function(e){e.preventDefault(),t(this).hasClass("toggled")?(t(this).removeClass("toggled"),o.filter(function(t){return t>2}).addClass("hide")):(t(this).addClass("toggled"),o.removeClass("hide"))}),n.filter(function(){return t(this).find("> li").length>5}).carousel({itemPerSlide:5,containerSelector:".thumbs",speed:200,controlsClass:"xm-controls-small",easing:"linear"}),n.filter(function(){return t(this).find("> li").length>1}).find("> li").on("mouseenter",function(){var e=t(this),a=e.closest(".goods-item, .goods-detail-item"),i=a.find(".J_likeGoods"),o=e.data("config"),s="";e.addClass("active").siblings().removeClass("active"),"0"!==o.discount&&(s+='<div class="flag flag-saleoff">'+o.discount+"折促销</div>"),o.postfree&&(s+='<div class="flag flag-postfree">'+(2===o.postfreenum?"2件":"")+"包邮</div>"),o.hasgift&&(s+='<div class="flag flag-gift">有赠品</div>'),o["new"]&&(s+='<div class="flag flag-new">新品上架</div>');var n=o.cfrom||"list";a.find(".price").html(o.price).end().find(".figure-img img").attr("src",t(this).find("img").attr("src").replace("34x34","200x200")).end().find(".figure-img a, .title a").attr("href",MI.GLOBAL_CONFIG.itemSite+"/"+o.cid+".html?cfrom="+n).end().find(".flags").html(s),o["is-cos"]?a.find(".J_buyGoods").addClass("btn-buy-detail").attr("href",MI.GLOBAL_CONFIG.orderSite+"/misc/subscribe/goods/"+o.gid).html('<span>到货提醒</span> <i class="iconfont">&#xe606;</i>'):o["package"]?a.find(".J_buyGoods").addClass("btn-buy-detail").attr("href",MI.GLOBAL_CONFIG.itemSite+"/"+o.cid+".html?cfrom=list").html('<span>查看详情</span> <i class="iconfont">&#xe60a;</i>'):a.find(".J_buyGoods").removeClass("btn-buy-detail").attr({href:MI.GLOBAL_CONFIG.cartSite+"/cart/add/"+o.gid+"-0-1","data-gid":o.gid}).html('<span>加入购物车</span> <i class="iconfont">&#xe60a;</i>'),i.attr("data-cid",o.cid),"1"===e.attr("data-liked")?i.addClass("btn-liked").find(".iconfont").html("&#xe62e;"):i.removeClass("btn-liked").find(".iconfont").html("&#xe62d;")}),t(".J_likeGoods").on("click",function(e){function a(e,a){var i;if("add"===a)i=MI.GLOBAL_CONFIG.orderSite+"/favorite/add/id/"+s;else{if("drop"!==a)return!1;i=MI.GLOBAL_CONFIG.orderSite+"/favorite/drop/id/"+s}t.ajax({type:"GET",url:i,dataType:"jsonp",jsonp:"jsonpcallback",success:function(t){e.removeClass("disable"),1===t.code?"add"===a?(e.addClass("btn-liked").find(".iconfont").html("&#xe62e;"),o.find('.thumb-list > [data-cid="'+s+'"]').attr("data-liked",1)):(e.removeClass("btn-liked").find(".iconfont").html("&#xe62d;"),o.find('.thumb-list > [data-cid="'+s+'"]').attr("data-liked",0)):alert(t.msg)}})}var i=t(this),o=i.closest(".goods-item, .goods-detail-item"),s=i.attr("data-cid");return e.preventDefault(),i.hasClass("disable")?!1:(i.addClass("disable"),void(i.hasClass("btn-liked")?a(i,"drop"):a(i,"add")))}),t(".J_buyGoods").on("click",function(e){var a=t(this),i=a.closest(".goods-item, .goods-detail-item");return a.hasClass("disabled")?!1:void(a.hasClass("btn-buy-detail")||(e.preventDefault(),MI.addShopCart(a.attr("data-gid"),function(t){function e(){i.removeClass("goods-item-notice"),setTimeout(function(){a.removeClass("disabled"),i.find(".notice").empty()},500)}1===t.code?(i.addClass("goods-item-notice").find(".notice").empty().append('<a class="btn btn-block btn-green btn-notice" href="javascript: void(0);">成功加入购物车</a>'),i.find(".btn-notice").one("click",e),setTimeout(function(){e()},1e3)):(a.removeClass("disabled"),alert(t.msg))})))}),t("#J_renovateWrap").miRecommend({type:2,gid:0,title:"为你推荐",page:SITE_ID||"List"}),t("#J_renovateWrap").after('<div id="J_historyWrap" class="xm-recommend-container"></div>'),t("#J_historyWrap").miRecommend({type:4,title:"您还看了",page:SITE_ID||"List"}),"undefined"!=typeof SEARCH_WORDS&&SEARCH_WORDS&&t.cookie("miwd",SEARCH_WORDS,{domain:"mi.com",path:"/",expires:parseFloat((1/48).toFixed(2))})}(jQuery)},function(t,e){!function(t){function e(e){function a(){return 0>=b?!1:(x&&clearInterval(x),void(x=setTimeout(function(){var t=C===b-1?0:C+1;i(t),a()},p.pause)))}function i(t){return C===t?!1:(_.css({marginLeft:-h*g*t,transition:"margin-left "+p.speed/1e3+"s "+p.easing}),p.controls&&(0===t?c.addClass("control-disabled"):c.removeClass("control-disabled"),t===b-1?u.addClass("control-disabled"):u.removeClass("control-disabled")),p.pager&&m.find("li").eq(t).addClass("pager-active").siblings().removeClass("pager-active"),void(C=t))}function o(){for(var e='<ul class="xm-pagers">',a=0,o=b;o>a;a+=1)e+='<li class="pager'+(0===a?" pager-active":"")+'"><span class="dot">'+(a+1)+"</span></li>";e+="</ul>",m.html(e),m.find("li").off(".carousel").on("click.carousel",function(){t(this).addClass("pager-active").siblings().removeClass("pager-active"),i(m.find("li").index(t(this)))})}function s(){g=p.itemPerSlide||Math.ceil(r.width()/h),b=Math.ceil(l.length/g),1>=b||(i(0),p.pager&&o(),p.auto&&(a(),p.controls&&d.find(".control").off(".carousel").on({"mouseenter.carousel":function(){x&&clearTimeout(x)},"mouseleave.carousel":function(){a()}}),p.pager&&m.find(".pager").off(".carousel").on({"mouseenter.carousel":function(){x&&clearTimeout(x)},"mouseleave.carousel":function(){a()}})))}var n,r,l,d,c,u,m,f,p,g,h,v,b,_=t(this),x=0,C=-1;return f={itemSelector:"> li",itemWidth:null,itemHeight:null,itemPerSlide:null,containerSelector:null,controlsSelector:null,pagersSelector:null,speed:500,easing:"ease",auto:!1,pause:5e3,controls:!0,controlsClass:"xm-controls-line-small",pager:!1,onLoad:t.noop},p=t.extend({},f,e),l=_.find(p.itemSelector),p.itemPerSlide&&l.length<=p.itemPerSlide?this:(h=p.itemWidth||l.outerWidth(!0),v=p.itemHeight||l.outerHeight(),n=p.containerSelector?_.closest(p.containerSelector):_.parent(),n.addClass("xm-carousel-container"),r=_.wrap('<div class="xm-carousel-wrapper"></div>').closest(".xm-carousel-wrapper").css({height:v,overflow:"hidden"}),_.css("width",h*l.length),p.controls&&(d=t('<div class="xm-controls '+p.controlsClass+' xm-carousel-controls"><a class="control control-prev iconfont" href="javascript: void(0);">&#xe628;</a><a class="control control-next iconfont" href="javascript: void(0);">&#xe623;</a></div>'),p.controlsSelector?n.find(p.controlsSelector).append(d):d.insertAfter(r),c=d.find(".control-prev"),u=d.find(".control-next"),c.on("click",function(e){e.preventDefault(),t(this).hasClass("control-disabled")||i(C-1)}),u.on("click",function(e){e.preventDefault(),t(this).hasClass("control-disabled")||i(C+1)})),p.pager&&(m=t('<div class="xm-pagers-wrapper"></div>'),p.pagersSelector?n.find(p.pagersSelector).append(m):m.insertAfter(r)),s(),p.onLoad(_),void t(window).on("resize",s))}t.fn.carousel=function(t){return this.each(function(){e.call(this,t)}),this}}(jQuery)},function(t,e,a){a(2),a(4),function(t){"use strict";function e(e){var o,n=l[s.type],r=t.cookie("userId")||"",d=t.cookie("mstuid");switch(s.type){case 2:var c="?u="+d+"&i="+r+"&a="+s.cid;o=s.apiHost[2]+c,"Home"===s.page&&(o+="&c=AA");break;case 4:o=s.apiHost[s.type]+"?mstuid="+d+"&mid="+r;break;default:o=s.apiHost[s.type]+"?a="+s.cid+"&cid="+s.gid}t.ajax({dataType:"JSONP",url:o,jsonpCallback:n,cache:!0,params:s,success:function(o){if(o.type=this.params.type,o.title=this.params.title,o.global=MI.GLOBAL_CONFIG,o.iHost=this.params.iHost,o.isBuy=this.params.isBuy,o.useCarousel=this.params.useCarousel,o.r.length<this.params.showMin)return!1;var s=t(e),n=a(5);s.addClass("container").html(n(o));var r=s.find("ul[data-carousel-list=true]").eq(0);i(s,r,this.params),null!==this.params.callback&&"function"==typeof this.params.callback&&this.params.callback()}})}function i(e,a,i){3!==i.type&&i.useCarousel&&a.carousel({containerSelector:e,controls:i.carouselControl,pager:i.carouselPage,itemHeight:320}),i.isBuy&&(t(".J_xm-recommend-list").hover(function(){t(this).find(".J_xm-recommend-btn").show()},function(){t(this).find(".J_xm-recommend-btn").hide()}),t(".J_xm-recommend-btn").off(".addcart").on("click.addcart",function(){function e(){o.removeClass("xm-recommend-notice-active"),setTimeout(function(){a.removeClass("disabled"),o.empty()},500)}var a=t(this),o=a.parent().siblings(".xm-recommend-notice");return a.hasClass("disabled")?!1:(MI.addShopCart(a.attr("data-stat-gid"),function(t){1===t.code?"Cart"!==i.page?(o.addClass("xm-recommend-notice-active").empty().append('<a class="btn btn-block btn-green btn-notice" href="javascript: void(0);">成功加入购物车</a>'),o.find(".btn-notice").one("click",e),setTimeout(function(){e()},1e3)):location.href=MI.GLOBAL_CONFIG.staticSite+"/cart/":alert(t.msg)}),!1)}));var s=r.page[i.page],n=r.api[i.type];o(e,s,n),t.isFunction(t("body").linkSign)&&e.linkSign({live:!0});var l=e.attr("id"),d="re-"+s+"."+n;t.force_appear(),e.appear(),e.one("appear",function(){"undefined"!=typeof _msq&&_msq.push(["trackPanelShow",l,d])})}function o(e,a,i){var o=e.find("a");t.each(o,function(e,o){var s,n=t(o).attr("data-stat-index"),r=d(t(o).attr("data-stat-text")),l=t(o).attr("data-stat-method"),c=t(o).attr("data-stat-addcart");s=c?"stat_"+a+c+"."+i+"_"+n+"_"+l:"stat_"+a+"."+i+"_"+n+"_"+l,t(o).attr({"data-stat-pid":s,"data-stat-aid":r})})}var s,n={cid:2,type:1,gid:"1152300005",title:"",showMin:5,apiHost:["//rec.www.mi.com/alsoview/get","//rec.www.mi.com/alsobuy/get","//rec.www.mi.com/guesslike/get","//rec.www.mi.com/cartbuy/get","//rec.www.mi.com/viewlist/get"],page:"Cart",iHost:"//i1.mifile.cn/a1/",isBuy:!1,useCarousel:!0,carouselControl:!1,carouselPage:!0,callback:null},r={page:{Home:"首页",ItemTail:"单品页底部",ComAll:"全部评论页",ComSuc:"评论成功页",AskAll:"全部提问页",AskDetail:"提问详情页",List:"列表页",Cart:"购物车",CartSuc:"加购成功",Saleoff:"下架页",Search:"搜索页",ErrorTip:"报错页"},api:["看了还看","买了还买","猜你喜欢","购物车推荐","您还看了"]},l=["recommend_alsoview","recommend_alsobuy","recommend_guesslike","recommend_cart","recommend_history"],d=function(t){try{return t.replace(/\s/g,"")}catch(e){return t}};t.fn.miRecommend=function(a){s=t.extend(n,a),e(this)}}(jQuery)},function(t,e){!function(t){function e(){s=!1;for(var e=0,o=i.length;o>e;e++){var n=t(i[e]).filter(function(){return t(this).is(":appeared")});if(n.trigger("appear",[n]),a){var r=a.not(n);r.trigger("disappear",[r])}a=n}}var a,i=[],o=!1,s=!1,n={interval:250,force_process:!1},r=t(window);t.expr[":"].appeared=function(e){var a=t(e);if(!a.is(":visible"))return!1;var i=r.scrollLeft(),o=r.scrollTop(),s=a.offset(),n=s.left,l=s.top;return l+a.height()>=o&&l-(a.data("appear-top-offset")||0)<=o+r.height()&&n+a.width()>=i&&n-(a.data("appear-left-offset")||0)<=i+r.width()?!0:!1},t.fn.extend({appear:function(a){var r=t.extend({},n,a||{}),l=this.selector||this;if(!o){var d=function(){s||(s=!0,setTimeout(e,r.interval))};t(window).scroll(d).resize(d),o=!0}return r.force_process&&setTimeout(e,r.interval),i.push(l),t(l)}}),t.extend({force_appear:function(){return o?(e(),!0):!1}})}(jQuery)},function(t,e){t.exports=function(t){var e="";t.title&&(e+='<h2 class="xm-recommend-title"><span>'+t.title+"</span></h2>"),e+='<div class="xm-recommend"><ul class="',e+=3!==t.type&&t.useCarousel?"xm-carousel-col-5-list xm-carousel-list clearfix":"row",e+='" data-carousel-list="true">';var a=t.r;if(a)for(var i,o=-1,s=a.length-1;s>o;)i=a[o+=1],e+=' <li class="J_xm-recommend-list',3!==t.type&&t.useCarousel||(e+=" span4"),e+='"> ',i.ext&&i.ext.img&&i.ext.url?e+=' <a target="_blank" href="'+i.ext.url+'" data-stat-gid="'+i.g+'" data-stat-method="'+t.v+"_"+i.a+'" data-stat-index='+o+' data-stat-text="'+i.n+'"> <img src="'+i.ext.img+'" width="100%" height="300px" alt="'+i.n+'"> </a> ':(e+=' <dl> <dt> <a href="'+t.global.itemSite+"/"+i.c+'.html" data-stat-method="'+t.v+"_"+i.a+'" data-stat-index='+o+' data-stat-text="'+i.n+'" target="_blank"> <img src="'+t.iHost+i.i+'?width=140&height=140" srcset="'+t.iHost+i.i+'?width=280&height=280 2x" alt="'+i.n+'" /> </a> </dt> <dd class="xm-recommend-name"> <a href="'+t.global.itemSite+"/"+i.c+'.html" data-stat-method="'+t.v+"_"+i.a+'" data-stat-index='+o+' data-stat-text="'+i.n+'" target="_blank"> '+i.n+' </a> </dd> <dd class="xm-recommend-price">'+i.p+'元</dd> <dd class="xm-recommend-tips"> ',i.l&&4!==t.type&&(e+=" ",parseInt(i.l)>0&&(e+=" "+i.l+"人好评 "),e+=" "),e+=" ",t.isBuy===!0&&(e+=' <a href="'+t.global.cartSite+"/cart/add/"+i.g+'-0-1" data-stat-gid="'+i.g+'" data-stat-method="'+t.v+"_"+i.a+'" data-stat-index='+o+' data-stat-text="'+i.n+'" data-stat-addcart="加购" class="btn btn-small btn-line-primary J_xm-recommend-btn">加入购物车</a> '),e+=' </dd> <dd class="xm-recommend-notice"></dd> </dl> '),e+=" </li>";return e+="</ul></div>"}},function(t,e){MI.namespace("xmHongbao"),MI.xmHongbao=function(){function t(t){t&&$.each(t,function(t,e){return e?void $('.J_tempItem[data-key="'+t+'"]').html(e):!0})}function e(t,e){return Math.floor(Math.random()*(e+1-t)+t)}function a(){var t=$("#J_qipaStar"),a=t.find(".item"),i=e(0,4);a.removeClass("current").eq(i).addClass("current")}function i(){$.ajax({url:u,dataType:"jsonp",jsonp:"jsonpcallback",timeout:1e4,error:function(){},success:function(t){if(t&&0===t.code){p=t.data;var e="";e=p.succ_message_title&&p.succ_message_subtitle?p.succ_message_title+"<br>"+p.succ_message_subtitle:p.succ_message_subtitle?p.succ_message_subtitle:p.succ_message_title,o({msg:e})}}})}function o(e){e&&($("#J_modalHongbao").remove(),$("body").append(g),t(e),$("#J_modalHongbao").modal({show:!0,backdrop:"static"}).one("hide",function(){clearTimeout(d)}),a(),$("#J_hongbaoOpen").one("click",function(){var t=$(this).hasClass("active"),e=""===document.createElement("a").style.animation?!0:!1;if(!t){if(!f)return void(location.href=m);$(this).addClass("active"),e?setTimeout(n,1e3):n()}}))}function s(t){var e="";return t&&t.length?($.each(t,function(t,a){a.pc_path&&a.pc_img_url&&(e+='<a target="_blank" href="'+a.pc_path+'" class="item"><img src="'+a.pc_img_url+'"><a>')}),e):e}function n(){$.ajax({url:c,dataType:"jsonp",jsonp:"jsonpcallback",data:{code:p.activity_code},timeout:1e4,error:function(){$("#J_modalHongbao").modal("hide"),MI.alert({msg:"抱歉！网络错误，请刷新重试！"})},success:function(t){t&&0===t.code?r(t.data.result?{title:t.data.award_name,desc:t.data.award_description,ad:t.data.ads.length?s(t.data.ads):"",prize:t.data.award_pc_img_url?'<img src="'+t.data.award_pc_img_url+'">':"",win:!0}:{title:t.data.fail_message_title,desc:t.data.fail_message_subtitle,ad:t.data.ads.length?s(t.data.ads):"",win:!1}):-1===t.code?location.href=m:-2===t.code&&($("#J_modalHongbao").modal("hide"),MI.alert({msg:"抱歉！网络错误，请刷新重试！"}))}})}function r(e){$("#J_modalHongbao").modal("hide"),$("#J_modalHongbaoResult").remove(),$("body").append(h),t(e),$("#J_modalHongbaoResult").modal("show").find(".modal-body").addClass(e.win&&!e.prize?"win":"")}function l(){i()}if(HongBaoHost){var d,c=HongBaoHost+"/redbag/default/draw",u=HongBaoHost+"/redbag/default/redbag",m=HongBaoHost+"/site/login?redirectUrl="+location.href,f=$.cookie("userId")?!0:!1,p={},g=multiline(function(){/*!@tpl
	<div class="modal modal-hongbao-qipa fade modal-hide" id="J_modalHongbao">
	    <div class="modal-body">
	        <a href="javascript:void(0);" class="open-btn" id="J_hongbaoOpen">开红包</a>
	        <div class="msg J_tempItem" data-key="msg"></div>
	        <div class="qipa-logo">奇葩说</div>
	        <div class="qipa-star" id="J_qipaStar">
	            <div class="item item-1 current"></div>
	            <div class="item item-2"></div>
	            <div class="item item-3"></div>
	            <div class="item item-4"></div>
	            <div class="item item-5"></div>
	        </div>
	    </div>
	</div>
	  */
console.log()}),h=multiline(function(){/*!@tpl
	<div class="modal modal-hongbao-result-qipa fade modal-hide" id="J_modalHongbaoResult">
	    <a class="close" data-dismiss="modal"><i class="iconfont">&#xe602;</i></a>
	    <div class="modal-body">
	        <div class="info-box">
	            <h3 class="title J_tempItem" data-key="title"></h3>
	            <p class="desc J_tempItem" data-key="desc"></p>
	            <div class="prize-img J_tempItem" data-key="prize"></div>
	        </div>
	        <div class="goods-list J_tempItem" data-key="ad"></div>
	        <div class="foot">
	          小米商城<br>
	          mi.com
	        </div>
	    </div>
	</div>
	  */
console.log()});l()}},$(document).ready(function(){MI.xmHongbao()})}]);