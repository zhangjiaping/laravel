!function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){i(2),i(3),i(4),i(6),i(7),i(8),i(9),$.productBuy=function(e){var t={isLogin:$.cookie("userId")?!0:!1,uid:$.cookie("userId"),elm:$("#J_buyBox"),hdUrl:"//a.huodong.mi.com",hdloginUrl:"//i.huodong.mi.com/site/login?redirectUrl="+location.href,staticUrl:MI.GLOBAL_CONFIG.staticSite+"/buySuccess/?gid=",orderapi:window.orderapi_host,orderSite:MI.GLOBAL_CONFIG.orderSite||"//order.mi.com",loginUrl:(MI.GLOBAL_CONFIG.orderSite||"//order.mi.com")+"/site/login?redirectUrl="+location.href},i=function(e){var t={type:"GET",url:e.url,dataType:"jsonp",jsonp:"jsonpcallback",data:e.data||"",timeout:1e4,error:function(t){var i=e.error;i&&i(t)},success:function(t){var i=e.callback;i&&i(t)}};e.jsonpCallback&&(t.jsonpCallback=e.jsonpCallback),$.ajax(t)},n={pid:e.id,product:"",parts:{},install:{},stockData:[],presalesData:[],hdinfoData:[],bigtapDataId:[],stockDataId:[],presalesDataId:[],chooseResult:{},selectedAddr:[],safety:null,mitvMember:null,allGoods:[],sortData:[],coupon:!1,couponData:[]},s={config:$.extend(t,e),fixBar:function(){var e="fix",t=$(window).scrollTop(),i=$("#J_img"),n=$("#J_proHeader").offset().top||140,s=i.offset().top,o=function(){var o=0;$(".login-notic").hasClass("hide")||(o=48),t>=s-64&&t>=n+o?(i.addClass(e).css({left:$(".pro-choose-main").offset().left}),t>=$("#J_proInfo").offset().top-580-o?(i.removeClass(e),i.css({marginTop:$(".pro-info").height()-520-o+"px"})):i.css({marginTop:0})):i.removeClass(e)};$(window).on("scroll.fix",function(){t=$(this).scrollTop(),o()}),o(),$(window).on("resize.fix",function(){o()})},loadImage:function(e){var t=new Image;return t.src=e.data("src"),t.complete?void e.attr("src",t.src).addClass("done"):void(t.onload=function(){e.attr("src",t.src).addClass("done")})},setViewImg:function(){function e(e,t){var i=$(e),n=i.find(".slider").eq(t);n.hasClass("done")||n.attr("src",n.data("src")).addClass("done")}this.slider&&this.slider.destroySlider();var t=$("#J_sliderView");$(".J_imgload").addClass("hide"),$("#J_img").removeClass("hide"),this.slider=t.slider({infiniteLoop:!0,hideControlOnEnd:!0,mode:"fade",auto:!0,autoHover:!0,onSliderLoad:function(i){e(t,i),$("#J_img").find(".slider").length<=1&&$("#J_img").find(".ui-controls").hide()},onSlideBefore:function(i,n,s){e(t,s)},startSlide:0})},selectSafety:function(e,t){var i=this,s=e.find("li");s.on("click",function(){$(this).hasClass("active")?($(this).removeClass("active"),n[t]=null):(s.removeClass("active"),$(this).addClass("active"),n[t]={id:$(this).data("id"),name:$(this).data("name"),price:$(this).data("price")}),i.formateProList()})},formateProList:function(){if($.isEmptyObject(n.parts)&&$.isEmptyObject(n.install)&&null===n.safety&&""===n.product)$("#J_proList").addClass("hide");else{var e=window.doT.template($("#J_proListTmp").html());$("#J_proList").removeClass("hide").html(e(n))}},selectList:function(e,t){var i=this,s=e.find("li"),o=s.find("a"),a=e.find(".J_listDescBox"),r=e.find(".J_listTips"),d=a.find(".J_listNum"),l={},c={},u={},h=function(){var e="",t=0,i=0;for(var n in l)(""!==l[n]||0===l[n])&&(e+=l[n]+"、",t+=parseFloat(c[n]),i+=parseFloat(u[n]));e=e.substring(0,e.length-1),a.find(".desc").html(e).end().find(".price").addClass(i===t?"":"del").html((i===t?"":"<del>"+i+"元</del>")+t+"元 ")},p=function(e,t){e.find(".img").attr("src",t.data("img")).end().find(".name").html(t.data("name")).end().find(".price").find("em").html(t.data("price")),e.find(".price").find("del").html(parseFloat(t.data("price"))<parseFloat(t.data("originalprice"))?t.data("originalprice"):"")},g=function(e){1===e?(a.addClass("hide"),r.removeClass("hide")):(a.removeClass("hide"),r.addClass("hide"))},f=function(e,t){var i={};for(var n in e)parseFloat(n)!==t&&(i[n]=e[n]);return i},v=function(e,i){l[e]=i.data("name"),c[e]=i.data("price"),u[e]=i.data("originalprice"),n[t][e]={id:i.data("id"),name:l[e],price:c[e]}};o.on("click",function(){if(!$(this).hasClass("active")){var e=$(this).parents("li");$(this).addClass("active").siblings("a").removeClass("active"),p(e,$(this)),e.hasClass("active")&&(v(e.index(),$(this)),i.formateProList(),h())}});var m=s.find("i");m.on("click",function(){var e=$(this).parents("li"),s=e.index();e.hasClass("active")?(e.removeClass("active"),l[s]="",c[s]=0,u[s]=0,n[t]=f(n[t],s),p(e,e.find("a").eq(0)),e.siblings("li").hasClass("active")?d.html(parseFloat(d.html())-1):(d.html("0"),g(1))):(e.addClass("active").find("a").eq(0).addClass("active"),d.html(parseFloat(d.html())+1),g(),v(s,e.find(".active"))),h(),i.formateProList()});var _=e.find(".J_extend"),x=e.find("ul");_.on("click",function(){x.toggleClass("hide"),_.hasClass("active")?(_.removeClass("active").html("&#xe61b;"),0===parseFloat(d.html())&&(a.addClass("hide"),r.removeClass("hide"))):(_.addClass("active").html("&#xe612;"),0===parseFloat(d.html())?(a.addClass("hide"),r.removeClass("hide")):(a.removeClass("hide"),r.addClass("hide")))}),e.find(".J_listDelete").on("click",function(){g(1);for(var e=0,o=s.length;o>e;e++)s.eq(e).removeClass("active").find("i").removeClass("active");n[t]={},l={},d.html(0),i.formateProList()})},buyCountDown:function(e){var t,i,n,s,o=this;clearInterval(o.msTimer),t=Math.floor(e%60),i=Math.floor(e/60%60),n=Math.floor(e/3600%24),s=Math.floor(e/86400)>0?Math.floor(e/86400):"";var a=(s>0?s+"天 ":"")+(n>0?n+"小时 ":"")+(i>0?i+"分钟 ":""),r=10;o.msTimer=setInterval(function(){r-=1,$(".J_timer").find("span").html(a+(t>0?t:0)+"."+r+"秒 ")},100)},countDown:function(){var e=this;$.miCountdown({startTime:n.hdstarttime,endTime:n.hdendtime,onTime:function(t){0===$(".countdown").find(".J_timer").length&&$(".countdown").html('<a href="javascript:void(0);" class="btn btn-gray-line btn-biglarge" data-type="bigtap">'+$(".countdown").data("name")+'</a><div class="J_timer">距离开始还有 <span ></span></div>'),e.buyCountDown(t)},onStart:function(){e.changeBuy()},onEnd:function(){e.changeBuy("end")}})},changeBuy:function(e){$(".J_timer").remove(),clearInterval(this.msTimer);var t="";t="end"===e?'<a data-type="bigtap" data-sign="disabled" class="btn btn-line-primary btn-biglarge J_setRemind" href="javascript:void(0);">设置开售提醒</a>':'<a href="javascript:void"  class="btn btn-primary btn-biglarge J_proBuyBtn add" id="J_proAddcart"  data-gid="'+n.id+'"data-type="bigtap">加入购物车</a>',$("#J_buyBtnBox").find(".btn").replaceWith(t)},setRemind:function(){var e=this,t=$(".J_setRemind"),s=t.data("type"),o=t.data("tip");o=o?o:"已设置开售提醒";var a=function(){$(".J_setRemind").replaceWith('<a class="btn btn-disabled btn-gray-line btn-biglarge J_setRemindBtn"  data-type="'+s+'" data-sign="disabled" href="javascript:void(0);">'+o+'</a><span class="J_cancleRemind">取消提醒</span>')},r=function(){$(".J_setRemindBtn").next().remove().end().replaceWith('<a class="btn btn-line-primary btn-biglarge J_setRemind" href="javascript:void(0);" data-type="'+s+'"  data-sign="disabled"  " >设置开售提醒</a>')};$("body").on("click",".J_setRemind",function(t){t.preventDefault(),i({url:e.config.orderSite+"/misc/onsaleRegister",data:{goods_id:n.id},callback:function(t){1===t.code?(a(),$("#J_setRemindModal").modal("show")):-2===t.code&&(window.location.href=e.config.loginUrl)}})}),$("body").on("click",".J_cancleRemind",function(t){t.preventDefault(),i({url:e.config.orderSite+"/misc/onsaleCleanup",data:{goods_id:n.id},callback:function(t){1===t.code?r():-2===t.code&&(window.location.href=e.config.loginUrl)}})}),i({url:e.config.orderSite+"/misc/onsaleCheck",data:{goods_list:n.id},callback:function(e){1===e.code&&0!==e.data.length&&""!==e.data[n.id]&&a()}})},loopGoods:function(e,t,i){var s=this,o=this.config.list.check_index[e],a=[];if($.each(n.allGoods,function(i,n){if(parseFloat(n.level)===e+1){var s=!1;$.each(t,function(e,t){t.hasChild=!1,(n.name===t.value||t.name===n.name)&&(s=!0,n.name===t.value&&(t.isExist=!0,t.child=n.child),a.push(t))}),s||(t.push(n),a.push(n))}}),""!==o.val){var r=!1;$.each(t,function(e,t){t.value===o.val&&(o.index=e,r=!0)}),r||(o.index=0,o.val=t[o.index].value)}else o.index=o.index,o.val=t[o.index].value;$.each(a,function(t,o){if(o.list){var a=s.config.list.check_index[e+1].val;$.each(o.child,function(e,t){if(""!==a){if(t===a)return void(o.hasChild=!0)}else for(var i=n.allGoods,s=0,r=i.length;r>s;s++)if(parseFloat(o.level)+1===parseFloat(i[s].level)){t===i[s].name&&(o.hasChild=!0);break}})}else i&&i.child?$.each(i.child,function(e,t){t===o.value&&(o.hasChild=!0)}):o.hasChild=!0});var d={index:e,num:o,data:a},l="";if(l=window.doT.template(a[o.index].list?$("#J_proTmp").html():$("#J_proTmp2").html()),$("#J_list").append(l(d)).find("img").each(function(){s.loadImage($(this))}),o=o.index,t[o].list)this.loopGoods(e+1,t[o].list,t[o]);else{var c=t[o].goods.services;c&&c.insurance&&(c.insurance.href=this.config.orderSite+"/product/insurance?type=",l=window.doT.template($("#J_insuranceTmp").html()),$("#J_list").append(l(c.insurance)),$("#J_safety").removeClass("hide")),l=window.doT.template($("#J_proImgTmp").html()),$("#J_sliderView").html(l(t[o].goods)),0!==t[o].goods.images.length&&this.setViewImg(),n.product={name:t[o].goods.goods_name,price:t[o].goods.goods_price+"元"},n.id=t[o].goods.goods_id,t[o].stockData=n.stockData,t[o].presalesData=n.presalesData,t[o].hdinfoData=n.hdinfoData,t[o].hdendtime=n.hdendtime,t[o].hdstarttime=n.hdstarttime,t[o].href=this.config.loginUrl,t[o].isLogin=this.config.isLogin,l=window.doT.template($("#J_buyBtnTmp").html()),$("#J_buyBtnBox").html(l(t[o]));var u=$("#J_policy");if(u.addClass("hide"),c&&c.service_refound_policy){var h=c.service_refound_policy;h&&0!==h.length&&(u.removeClass("hide").find(".J_tips").html(h.description),h.is_support?u.find(".nosupport").addClass("hide").end().find(".support").removeClass("hide"):u.find(".support").addClass("hide").end().find(".nosupport").removeClass("hide"))}$(".J_proPrice").html(n.product.price)}},hideLoadNotic:function(){var e=this;$(".J_proLoginClose").on("click",function(){e.config.elm.find(".J_notic").slideUp("fast","linear"),e.config.isLoginClose=!0})},formatPro:function(){var e=this;e.config.isLogin||(e.config.list.isLogin=e.config.isLogin,e.config.list.href=e.config.loginUrl,e.config.elm.find(".J_proLogin").attr("href",e.config.loginUrl).end().find(".J_notic").removeClass("hide")),e.config.elm.find(".J_error,.J_load").addClass("hide").end().find(".J_main").removeClass("hide"),n.safety=null,n.mitvMember=null,$("#J_list").html(""),e.loopGoods(0,e.config.list.list),e.selectStep(),e.selectSafety($("#J_safety"),"safety"),e.selectSafety($("#J_mitvMemberty"),"mitvMember"),e.formateProList();var t=$("#J_buyBtnBox").find(".btn"),i=t.data("type"),s=$("#J_relation");"disabled"!==t.data("sign")?(e.relation&&e.relation.length>0&&""!==s.attr("style")&&s.stop().animate({height:"133px"},300,"linear",function(){s.attr("style","")}),"bigtap"===i&&e.countDown()):(e.setRemind(),e.relation&&e.relation.length>0&&s.stop().animate({height:0},300,"linear",function(){s.css("overflow","hidden")})),n.selectedAddr.length?this.checkSelectAddr(i):this.chooseRegionsInit(i),n.coupon||o.init()},loopCheckIsBigtag:function(e,t){var i=t[parseFloat(this.config.list.check_index[e].index)];return(!i||i&&!i.price_min)&&(i=t[0]),i&&i.list?void this.loopCheckIsBigtag(e+1,i.list):(i=i.goods,i.actions.length>0&&"bigtap"===i.actions[0].type?void this.getHdInfoStatus():void this.formatPro())},checkIsBigtag:function(){this.loopCheckIsBigtag(0,this.config.list.list)},setSelectIndex:function(e,t,i){for(var n=0;n<this.config.list.check_index.length;n++)n===e&&(this.config.list.check_index[n].val=t,this.config.list.check_index[n].index=i)},unselected:function(e,t){var i=this;if(this.config.list.check_index[e].val=t,this.config.list.check_index[this.config.list.check_index.length-1].child=[],!(0>e)){var s=!1;$.each(n.allGoods,function(n,o){o.child.length>0&&$.each(o.child,function(n,a){a!==t||s||(i.config.list.check_index[e-1].val=o.name,i.config.list.check_index[e-1].index=o.level,2>e&&(i.config.list.check_index[e+1].val=o.child[0]),s=!0)})})}},selectStep:function(){var e=this,t=$(".J_step");t.find("li").on("click",function(){if(!$(this).hasClass("active")){var t=$(this).parents(".J_step");if($(this).hasClass("disabled")){if(parseFloat($(this).data("childlen"))>=1)return e.unselected(t.data("index"),$(this).data("value")),void e.checkIsBigtag();var i=$(this);return 0===i.find(".J_tips").length&&i.append('<div class="tips J_tips">暂时无此商品</div>'),i.find(".J_tips").stop().fadeIn(700),void setTimeout(function(){i.find(".J_tips").stop().fadeOut(700)},2e3)}e.setSelectIndex(t.data("index"),String($(this).data("value")),$(this).data("index")),e.checkIsBigtag()}})},getGoodsStock:function(){if(n.stockDataId.length>0){var e=this;i({url:e.config.orderapi+"/stock/listv2?gids="+n.stockDataId.join(","),error:function(){e.checkPresalesDataId("init")},callback:function(t){n.stockData=t.data,e.checkPresalesDataId("init")}})}else this.checkPresalesDataId("init")},selectFirstStock:function(){for(var e=this,t=0;t<n.allGoods.length;t++){var i=n.allGoods[t];if("bigtap"===i.actions&&n.hdinfoData&&n.hdinfoData[i.id]&&n.hdinfoData[i.id].hdstart&&!n.hdinfoData[i.id].hdstop){e.config.list.check_index[parseFloat(i.level)-1].val=i.name;break}if("presales"===i.actions&&n.presalesData&&n.presalesData[i.id]){e.config.list.check_index[parseFloat(i.level)-1].val=i.name;break}if("common"===i.actions&&n.stockData&&n.stockData[i.id]){e.config.list.check_index[parseFloat(i.level)-1].val=i.name;break}}},checkPresalesDataId:function(e){n.presalesDataId.length>0?this.getPresalesInfo(e):n.bigtapDataId.length>0?this.getHdInfoStatus(e):("init"===e&&this.selectFirstStock(),this.formatPro())},checkBigtapDataId:function(e){n.bigtapDataId.length>0?this.getHdInfoStatus(e):("init"===e&&this.selectFirstStock(),this.formatPro())},getPresalesInfo:function(e){var t=this;i({url:t.config.orderapi+"/stock/listv2?gids="+n.presalesDataId.join(","),data:{channel:"presales"},error:function(){t.checkBigtapDataId(e)},callback:function(i){n.presalesData=i.data,t.checkBigtapDataId(e)}})},getHdInfoStatus:function(e){var t=this;i({url:MI.GLOBAL_CONFIG.damiaoSite+"hdinfo/cn",data:{storage:"000",m:1},jsonpCallback:"hdinfo",error:function(){"init"===e&&t.selectFirstStock(),t.formatPro()},callback:function(i){n.hdinfoData=i.status,n.hdendtime=i.hdendtime,n.hdstarttime=i.hdstarttime,"init"===e&&t.selectFirstStock(),t.formatPro()}})},addCart:function(){function e(e){e&&1===e.code?(o=s.config.staticUrl+n.id+"&protype=product&pid="+n.pid,n.pid=e.message,i(e)):1!==e.code&&MI.alert({msg:e.msg})}function t(){if($.isEmptyObject(n.parts))location.href=null!==n.safety?o+"&insurance=success":o;else{var e="";$.each(n.parts,function(t,i){e+=i.id+"_"}),MI.addShopCart(e.substring(0,e.length-1),function(e){location.href=e&&1===e.code?null!==n.safety?o+"&insurance=success&relation=success":o+"&relation=success":o+"&relation=fail"},$(".J_proBuyBtn"))}}function i(e){null!==n.safety?MI.addShopCart(n.safety.id,function(e){e&&1===e.code?t():location.href=o+"&insurance=fail"},$(".J_proBuyBtn"),{parent_itemId:n.pid}):t(e)}var s=this,o="";$("body").on("click",".J_proBuyBtn",function(){"common"===$(this).data("type")?MI.addShopCart(n.id,e):"presales"===$(this).data("type")?$(this).data("isbigtap")?a($("#J_proBuyPresales"),"presales"):MI.addShopCart(n.id,e,$("#J_proBuyPresales"),{source:"presales"}):a($("#J_proBuyPresales"))});var a=function(t,i){MI.bigtap.init({obj:t,gid:n.id,callback:e,sourceVal:"presales"===i?"presales_bigtap":"bigtap",storage:"000",overCallback:function(){t.removeClass("btn-primary").addClass("btn-dakeLight").html("已售罄").removeClass("J_proBuyBtn")}})}},loopGoodsList:function(e,t){var i=this;$.each(t,function(t,s){var o=s.list||[],a=[];s.list&&$.each(s.list,function(e,t){a.push(t.value)}),n.allGoods.push({title:s.name,name:s.value,level:s.level,child:a,actions:s.goods&&s.goods.actions?s.goods.actions[0].type:"",id:s.goods&&s.goods.goods_id?s.goods.goods_id:0,icon_url:s.goods&&s.goods.icon_url?s.goods.icon_url:"",image:s.goods&&s.goods.image?s.goods.image:""}),o.length>0?i.loopGoodsList(e+1,o):(o=s.goods||[],$.each(o.actions,function(e,t){"bigtap"===t.type?n.bigtapDataId.push(o.goods_id):"presales"===t.type?n.presalesDataId.push(o.goods_id):n.stockDataId.push(o.goods_id)}))})},chooseRegionsInit:function(e){var t=this;MI.buyChooseAddress.init({showTrigger:"#J_switchChooseRegions",afterChoose:function(i){i&&i.length&&(n.selectedAddr=i,$("#J_modalChooseRegions").modal("hide"),t.checkSelectAddr(e))}})},checkSelectAddr:function(e){var t=function(){$("#J_productStatus").addClass("noserver").removeClass("over active presales").find(".time").html("")},s=function(){$("#J_productStatus").addClass("soldout").removeClass("active  noserver presales").find(".time").html("")},o={product_id:n.id,item_id:0,province_id:n.selectedAddr[0].id,city_id:n.selectedAddr[1].id,district_id:n.selectedAddr[2].id,area:n.selectedAddr[3].id};"presales"===e&&(o.is_presale=1),i({url:MI.GLOBAL_CONFIG.orderSite+"/api/deliverySearch.php",data:o,error:function(){t()},callback:function(i){i&&1===i.code?(n.selectedAddr.warehouse=i.data.mihome_id,1===i.data.can_delivery?i.data.is_cos?s():"disabled"===$("#J_buyBtnBox").find(".btn").data("sign")?s():"presales"===e?$("#J_productStatus").addClass("presales").removeClass("soldout noserver active").find(".time").html(i.data.est_delivery_desc):$("#J_productStatus").addClass("active").removeClass("soldout noserver presales").find(".time").html(i.data.est_delivery_desc):t()):t()}})},unique:function(e){for(var t=[e[0]],i=1,s=e.length;s>i;i++){for(var o=!1,a=0,r=t.length;r>a;a++)if(e[i].name===t[a].name&&e[i].level===t[a].level){o=!0;break}o||(t.push(e[i]),n.sortData.push(e[i].name))}return t},reloadFun:function(){var e=this;$(".J_reload").on("click",function(){$(".J_load").removeClass("hide"),$(".J_error").addClass("hide"),e.setAjaxInt()})},showError:function(e){$(".J_load").addClass("hide"),e=e?e:"有点小问题，请点击按钮刷新重试",$(".J_error").removeClass("hide").find("h3").html(e)},setAjaxInt:function(){var e=this;i({url:e.config.orderSite+"/product/get2",data:{product_id:n.pid},error:function(){e.showError()},callback:function(t){if(1===t.code){e.config.list=t.data,e.config.list.check_index=[{index:0,val:""},{index:0,val:""},{index:0,val:""}];var i=window.doT.template($("#J_addressTmp").html());n.need_address_check=t.data.need_address_check,t.data.need_address_check?$(".J_addressWrap").eq(0).html(i()).removeClass("hide"):$(".J_addressWrap").eq(1).html(i()).removeClass("hide"),e.config.list.isLogin=e.config.isLogin,e.config.list.href=e.config.loginUrl,e.addCart(),n.commodityIds=t.data.commodity_ids,""!==t.data.product_desc_ext&&$("#J_desc").html(t.data.product_desc_ext),""!==t.data.name&&(n.proName=t.data.name,$(".J_proName").html(n.proName)),e.loopGoodsList(0,e.config.list.list),n.allGoods=e.unique(n.allGoods),e.getGoodsStock()}else e.showError(t.msg)}}),setTimeout(function(){i({url:e.config.orderSite+"/product/getExtendInfo",data:{product_id:n.pid},callback:function(t){if(1===t.code){t=t.data,e.relation=t.relation;var i="";if(t.relation&&t.relation.length>0){var n={max:t.relation_max_save,data:t.relation};i=window.doT.template($("#J_relationTmp").html()),$("#J_relation").html(i(n)),e.selectList($("#J_parts"),"parts"),e.selectList($("#J_install"),"install")}if(t.info&&t.info.desc_tabs_view&&t.info.desc_tabs_view[0]){i=window.doT.template($("#J_proInfoTmp").html()),$("#J_proInfo").html(i(t.info.desc_tabs_view[0].tab_content)).find(".J_imgBox").each(function(){$(this).slider({auto:!0,pager:!0,infiniteLoop:!0})});var s=$(".section");s.visibleWatcher({onVisible:function(t,i){s.filter(function(e){return i+1>=e}).addClass("preload").find("img").each(function(){e.loadImage($(this))})}})}}}})},500)},init:function(){this.hideLoadNotic(),this.fixBar(),this.reloadFun(),this.setAjaxInt(),setTimeout(function(){MI.proNav({id:window.proBuy_id,target:"buy"}),$(".J_proName").html(n.proName)},500)}},o={config:$.extend(t,e),setProxy:function(e,t){var i=$('<iframe width="0" height="0" name="proCoupon"></iframe>');i.attr("src",t),$("body").append(i),$('iframe[name="proCoupon"]').load(function(){"function"==typeof e&&e(),$('iframe[name="proCoupon"]').remove()})},getCoupon:function(){var e=this,t=function(e){$("#J_couponModal").find(".list").addClass("hide").end().find(".result").removeClass("hide").find(".con").addClass("hide").end().find(e).removeClass("hide")};$("body").on("click",".J_getCoupon",function(){if(!e.config.isLogin)return void(window.location.href=e.config.hdloginUrl);var n=$(this).data("actcode"),s=$(this).data("drawcode");i({url:e.config.hdUrl+"/activity/draw/draw/antiuid/"+e.config.uid,data:{code:n,channel:"pc",activitytype:"draw",drawcode:s},callback:function(e){var i=e.code;return 0===i?void t(".succ"):20006===i||20007===i||20013===i||20014===i?void t(".over"):void t(".fail")}})}),$("body").on("click",".J_getCouponList",function(){return e.config.isLogin?void(n.coupon?e.getCouponList():($("#J_couponModal").modal("show"),n.coupon=!0)):void(window.location.href=e.config.hdloginUrl)}),$("body").on("click",".J_getCouponReturn",function(){e.getCouponList()})},getCouponList:function(){var e=this,t=$("#J_couponModal"),s=$(".J_couponWrap"),o=window.doT.template($("#J_couponListTmp").html());i({url:e.config.orderSite+"/product/coupon?commodity_ids="+n.commodityIds.join(","),jsonpcallback:"jsonp1",callback:function(i){if(1===i.code){if(n.couponData=i.data.can_apply_coupons,n.couponData&&0!==n.couponData.length){var a=0,r="",d="";for(var l in n.couponData)0===a&&(r=n.couponData[l].name),n.couponData[l].id=l,d+=o(n.couponData[l]),a++;a>1&&(r=r+"等"+a+"种优惠券"),s.removeClass("hide").find(".J_couponName").html(r),t.find(".list").removeClass("hide").end().find(".result").addClass("hide").end().find("ul").html(d).end().find(".no-coupon").remove(),n.coupon&&t.modal("show")}else s.addClass("hide"),t.find(".list").removeClass("hide").append('<p class="no-coupon">优惠券已经被领光了</p>').end().find(".result").addClass("hide").end().find("ul").html("");i.data.sync_login&&e.setProxy(function(){},i.data.sync_login)}}})},init:function(){this.getCouponList(),this.getCoupon()}};s.init()},$.productBuy({id:window.proBuy_id})},function(e,t){!function(e){function t(t){function i(){for(var t=-1,i=e(document).scrollTop(),n=0,s=l.length;s>n&&i+a.viewport.height()>l[n];n+=1)t+=1;return t}function n(){var t=i();d!==t&&(d=t,r.filter(function(t){return d>=t&&!e(this).hasClass(a.visibleClass)}).addClass(a.visibleClass).trigger("visible.visibleWatcher"),a.onVisible(r.eq(d),d))}function s(){r.each(function(){var t=e(this).attr("data-offset")?Number(e(this).attr("data-offset")):a.offset,i=t%1===0?t:t*a.viewport.height();l.push(e(this).offset().top+i)}),n(),a.onLoad()}var o,a,r=e(this),d=-1,l=[];o={viewport:e(window),visibleClass:"is-visible",offset:300,onLoad:e.noop,onVisible:e.noop},a=e.extend({},o,t),s(),a.viewport.on({"scroll.visibleWatcher":n,"resize.visibleWatcher":s})}e.fn.visibleWatcher=function(e){return t.call(this,e),this}}(jQuery)},function(e,t){!function(e){var t={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"ui-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"下一张",prevText:"上一张",nextSelector:null,prevSelector:null,autoControls:!1,startText:"开始",stopText:"停止",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:e.noop,onSlideBefore:e.noop,onSlideAfter:e.noop,onSlideNext:e.noop,onSlidePrev:e.noop,onSliderResize:e.noop};e.fn.slider=function(s){if(0==this.length)return this;if(this.length>1)return this.each(function(){e(this).slider(s)}),this;var o={},a=this;t.el=this;var r=e(window).width(),d=e(window).height(),l=function(){o.settings=e.extend({},n,s),o.settings.slideWidth=parseInt(o.settings.slideWidth),o.children=a.children(o.settings.slideSelector),o.children.length<o.settings.minSlides&&(o.settings.minSlides=o.children.length),o.children.length<o.settings.maxSlides&&(o.settings.maxSlides=o.children.length),o.settings.randomStart&&(o.settings.startSlide=Math.floor(Math.random()*o.children.length)),o.active={index:o.settings.startSlide},o.carousel=o.settings.minSlides>1||o.settings.maxSlides>1,o.carousel&&(o.settings.preloadImages="all"),o.minThreshold=o.settings.minSlides*o.settings.slideWidth+(o.settings.minSlides-1)*o.settings.slideMargin,o.maxThreshold=o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin,o.working=!1,o.controls={},o.interval=null,o.animProp="vertical"==o.settings.mode?"top":"left",o.usingCSS=o.settings.useCSS&&"fade"!=o.settings.mode&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return o.cssPrefix=t[i].replace("Perspective","").toLowerCase(),o.animProp="-"+o.cssPrefix+"-transform",!0;return!1}(),"vertical"==o.settings.mode&&(o.settings.maxSlides=o.settings.minSlides),a.data("origStyle",a.attr("style")),a.children(o.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),c()},c=function(){a.wrap('<div class="'+o.settings.wrapperClass+'"><div class="ui-viewport"></div></div>'),o.viewport=a.parent(),o.loader=e('<div class="ui-loading" />'),o.viewport.prepend(o.loader),a.css({width:"horizontal"==o.settings.mode?100*o.children.length+215+"%":"auto",position:"relative"}),o.usingCSS&&o.settings.easing?a.css("-"+o.cssPrefix+"-transition-timing-function",o.settings.easing):o.settings.easing||(o.settings.easing="swing");v();o.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),o.viewport.parent().css({maxWidth:g()}),o.settings.pager||o.viewport.parent().css({margin:"0 auto 0px"}),o.children.css({"float":"horizontal"==o.settings.mode?"left":"none",listStyle:"none",position:"relative"}),o.children.css("width",f()),"horizontal"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginRight",o.settings.slideMargin),"vertical"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginBottom",o.settings.slideMargin),"fade"==o.settings.mode&&(o.children.css({position:"absolute",zIndex:0,display:"none"}),o.children.eq(o.settings.startSlide).css({zIndex:o.settings.slideZIndex,display:"block"})),o.controls.el=e('<div class="ui-controls" />'),o.settings.captions&&y(),o.active.last=o.settings.startSlide==m()-1,o.settings.video&&a.fitVids();var t=o.children.eq(o.settings.startSlide);"all"==o.settings.preloadImages&&(t=o.children),o.settings.ticker?o.settings.pager=!1:(o.settings.pager&&S(),o.settings.controls&&C(),o.settings.auto&&o.settings.autoControls&&b(),(o.settings.controls||o.settings.autoControls||o.settings.pager)&&o.viewport.after(o.controls.el)),u(t,h)},u=function(t,i){var n=t.find("img, iframe").length;if(0==n)return void i();var s=0;t.find("img, iframe").each(function(){e(this).one("load",function(){++s==n&&i()}).each(function(){this.complete&&e(this).load()})})},h=function(){if(o.settings.infiniteLoop&&"fade"!=o.settings.mode&&!o.settings.ticker){var t="vertical"==o.settings.mode?o.settings.minSlides:o.settings.maxSlides,i=o.children.slice(0,t).clone().addClass("ui-clone"),n=o.children.slice(-t).clone().addClass("ui-clone");a.append(i).prepend(n)}o.loader.remove(),_(),"vertical"==o.settings.mode&&(o.settings.adaptiveHeight=!0),o.viewport.height(p()),a.redrawSlider(),o.settings.onSliderLoad(o.active.index),o.initialized=!0,o.settings.responsive&&e(window).bind("resize",G),o.settings.auto&&o.settings.autoStart&&(m()>1||o.settings.autoSlideForOnePage)&&B(),o.settings.ticker&&P(),o.settings.pager&&L(o.settings.startSlide),o.settings.controls&&E(),o.settings.touchEnabled&&!o.settings.ticker&&W()},p=function(){var t=0,n=e();if("vertical"==o.settings.mode||o.settings.adaptiveHeight)if(o.carousel){var s=1==o.settings.moveSlides?o.active.index:o.active.index*$();for(n=o.children.eq(s),i=1;i<=o.settings.maxSlides-1;i++)n=n.add(s+i>=o.children.length?o.children.eq(i-1):o.children.eq(s+i))}else n=o.children.eq(o.active.index);else n=o.children;return"vertical"==o.settings.mode?(n.each(function(i){t+=e(this).outerHeight()}),o.settings.slideMargin>0&&(t+=o.settings.slideMargin*(o.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),"border-box"==o.viewport.css("box-sizing")?t+=parseFloat(o.viewport.css("padding-top"))+parseFloat(o.viewport.css("padding-bottom"))+parseFloat(o.viewport.css("border-top-width"))+parseFloat(o.viewport.css("border-bottom-width")):"padding-box"==o.viewport.css("box-sizing")&&(t+=parseFloat(o.viewport.css("padding-top"))+parseFloat(o.viewport.css("padding-bottom"))),t},g=function(){var e="100%";return o.settings.slideWidth>0&&(e="horizontal"==o.settings.mode?o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin:o.settings.slideWidth),e},f=function(){var e=o.settings.slideWidth,t=o.viewport.width();return 0==o.settings.slideWidth||o.settings.slideWidth>t&&!o.carousel||"vertical"==o.settings.mode?e=t:o.settings.maxSlides>1&&"horizontal"==o.settings.mode&&(t>o.maxThreshold||t<o.minThreshold&&(e=(t-o.settings.slideMargin*(o.settings.minSlides-1))/o.settings.minSlides)),e},v=function(){var e=1;if("horizontal"==o.settings.mode&&o.settings.slideWidth>0)if(o.viewport.width()<o.minThreshold)e=o.settings.minSlides;else if(o.viewport.width()>o.maxThreshold)e=o.settings.maxSlides;else{var t=o.children.first().width()+o.settings.slideMargin;e=Math.floor((o.viewport.width()+o.settings.slideMargin)/t)}else"vertical"==o.settings.mode&&(e=o.settings.minSlides);return e},m=function(){var e=0;if(o.settings.moveSlides>0)if(o.settings.infiniteLoop)e=Math.ceil(o.children.length/$());else for(var t=0,i=0;t<o.children.length;)++e,t=i+v(),i+=o.settings.moveSlides<=v()?o.settings.moveSlides:v();else e=Math.ceil(o.children.length/v());return e},$=function(){return o.settings.moveSlides>0&&o.settings.moveSlides<=v()?o.settings.moveSlides:v()},_=function(){if(o.children.length>o.settings.maxSlides&&o.active.last&&!o.settings.infiniteLoop){if("horizontal"==o.settings.mode){var e=o.children.last(),t=e.position();x(-(t.left-(o.viewport.width()-e.outerWidth())),"reset",0)}else if("vertical"==o.settings.mode){var i=o.children.length-o.settings.minSlides,t=o.children.eq(i).position();x(-t.top,"reset",0)}}else{var t=o.children.eq(o.active.index*$()).position();o.active.index==m()-1&&(o.active.last=!0),void 0!=t&&("horizontal"==o.settings.mode?x(-t.left,"reset",0):"vertical"==o.settings.mode&&x(-t.top,"reset",0))}},x=function(e,t,i,n){if(o.usingCSS){var s="vertical"==o.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";a.css("-"+o.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==t?(a.css(o.animProp,s),a.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){a.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),D()})):"reset"==t?a.css(o.animProp,s):"ticker"==t&&(a.css("-"+o.cssPrefix+"-transition-timing-function","linear"),a.css(o.animProp,s),a.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){a.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),x(n.resetValue,"reset",0),j()}))}else{var r={};r[o.animProp]=e,"slide"==t?a.animate(r,i,o.settings.easing,function(){D()}):"reset"==t?a.css(o.animProp,e):"ticker"==t&&a.animate(r,speed,"linear",function(){x(n.resetValue,"reset",0),
j()})}},w=function(){for(var t="",i=m(),n=0;i>n;n++){var s="";o.settings.buildPager&&e.isFunction(o.settings.buildPager)?(s=o.settings.buildPager(n),o.pagerEl.addClass("ui-custom-pager")):(s=n+1,o.pagerEl.addClass("ui-default-pager")),t+='<div class="ui-pager-item"><a href="" data-slide-index="'+n+'" class="ui-pager-link">'+s+"</a></div>"}o.pagerEl.html(t)},S=function(){o.settings.pagerCustom?o.pagerEl=e(o.settings.pagerCustom):(o.pagerEl=e('<div class="ui-pager" />'),o.settings.pagerSelector?e(o.settings.pagerSelector).html(o.pagerEl):o.controls.el.addClass("ui-has-pager").append(o.pagerEl),w()),o.pagerEl.on("click","a",A)},C=function(){o.controls.next=e('<a class="ui-next" href="">'+o.settings.nextText+"</a>"),o.controls.prev=e('<a class="ui-prev" href="">'+o.settings.prevText+"</a>"),o.controls.next.bind("click",k),o.controls.prev.bind("click",J),o.settings.nextSelector&&e(o.settings.nextSelector).append(o.controls.next),o.settings.prevSelector&&e(o.settings.prevSelector).append(o.controls.prev),o.settings.nextSelector||o.settings.prevSelector||(o.controls.directionEl=e('<div class="ui-controls-direction" />'),o.controls.directionEl.append(o.controls.prev).append(o.controls.next),o.controls.el.addClass("ui-has-controls-direction").append(o.controls.directionEl))},b=function(){o.controls.start=e('<div class="ui-controls-auto-item"><a class="ui-start" href="">'+o.settings.startText+"</a></div>"),o.controls.stop=e('<div class="ui-controls-auto-item"><a class="ui-stop" href="">'+o.settings.stopText+"</a></div>"),o.controls.autoEl=e('<div class="ui-controls-auto" />'),o.controls.autoEl.on("click",".ui-start",T),o.controls.autoEl.on("click",".ui-stop",I),o.settings.autoControlsCombine?o.controls.autoEl.append(o.controls.start):o.controls.autoEl.append(o.controls.start).append(o.controls.stop),o.settings.autoControlsSelector?e(o.settings.autoControlsSelector).html(o.controls.autoEl):o.controls.el.addClass("ui-has-controls-auto").append(o.controls.autoEl),M(o.settings.autoStart?"stop":"start")},y=function(){o.children.each(function(t){var i=e(this).find("img:first").attr("title");void 0!=i&&(""+i).length&&e(this).append('<div class="ui-caption"><span>'+i+"</span></div>")})},k=function(e){o.settings.auto&&a.stopAuto(),a.goToNextSlide(),e.preventDefault()},J=function(e){o.settings.auto&&a.stopAuto(),a.goToPrevSlide(),e.preventDefault()},T=function(e){a.startAuto(),e.preventDefault()},I=function(e){a.stopAuto(),e.preventDefault()},A=function(t){var i=e(t.currentTarget);if(void 0!==i.attr("data-slide-index")){var n=parseInt(i.attr("data-slide-index"));n!=o.active.index&&(o.settings.auto&&a.stopAuto(),a.goToSlide(n)),t.preventDefault()}},L=function(t){var i=o.children.length;return"short"==o.settings.pagerType?(o.settings.maxSlides>1&&(i=Math.ceil(o.children.length/o.settings.maxSlides)),void o.pagerEl.html(t+1+o.settings.pagerShortSeparator+i)):(o.pagerEl.find("a").removeClass("active"),void o.pagerEl.each(function(i,n){e(n).find("a").eq(t).addClass("active")}))},D=function(){if(o.settings.infiniteLoop){var e="";0==o.active.index?e=o.children.eq(0).position():o.active.index==m()-1&&o.carousel?e=o.children.eq((m()-1)*$()).position():o.active.index==o.children.length-1&&(e=o.children.eq(o.children.length-1).position()),e&&("horizontal"==o.settings.mode?x(-e.left,"reset",0):"vertical"==o.settings.mode&&x(-e.top,"reset",0))}o.working=!1,o.settings.onSlideAfter(o.children.eq(o.active.index),o.oldIndex,o.active.index)},M=function(e){o.settings.autoControlsCombine?o.controls.autoEl.html(o.controls[e]):(o.controls.autoEl.find("a").removeClass("active"),o.controls.autoEl.find("a:not(.ui-"+e+")").addClass("active"))},E=function(){1==m()?(o.controls.prev.addClass("disabled"),o.controls.next.addClass("disabled")):!o.settings.infiniteLoop&&o.settings.hideControlOnEnd&&(0==o.active.index?(o.controls.prev.addClass("disabled"),o.controls.next.removeClass("disabled")):o.active.index==m()-1?(o.controls.next.addClass("disabled"),o.controls.prev.removeClass("disabled")):(o.controls.prev.removeClass("disabled"),o.controls.next.removeClass("disabled")))},B=function(){if(o.settings.autoDelay>0){setTimeout(a.startAuto,o.settings.autoDelay)}else a.startAuto();o.settings.autoHover&&a.hover(function(){o.interval&&(a.stopAuto(!0),o.autoPaused=!0)},function(){o.autoPaused&&(a.startAuto(!0),o.autoPaused=null)})},P=function(){var t=0;if("next"==o.settings.autoDirection)a.append(o.children.clone().addClass("ui-clone"));else{a.prepend(o.children.clone().addClass("ui-clone"));var i=o.children.first().position();t="horizontal"==o.settings.mode?-i.left:-i.top}x(t,"reset",0),o.settings.pager=!1,o.settings.controls=!1,o.settings.autoControls=!1,o.settings.tickerHover&&!o.usingCSS&&o.viewport.hover(function(){a.stop()},function(){var t=0;o.children.each(function(i){t+="horizontal"==o.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)});var i=o.settings.speed/t,n="horizontal"==o.settings.mode?"left":"top",s=i*(t-Math.abs(parseInt(a.css(n))));j(s)}),j()},j=function(e){speed=e?e:o.settings.speed;var t={left:0,top:0},i={left:0,top:0};"next"==o.settings.autoDirection?t=a.find(".ui-clone").first().position():i=o.children.first().position();var n="horizontal"==o.settings.mode?-t.left:-t.top,s="horizontal"==o.settings.mode?-i.left:-i.top,r={resetValue:s};x(n,"ticker",speed,r)},W=function(){o.touch={start:{x:0,y:0},end:{x:0,y:0}},o.viewport.bind("touchstart",F)},F=function(e){if(o.working)e.preventDefault();else{o.touch.originalPos=a.position();var t=e.originalEvent;o.touch.start.x=t.changedTouches[0].pageX,o.touch.start.y=t.changedTouches[0].pageY,o.viewport.bind("touchmove",R),o.viewport.bind("touchend",O)}},R=function(e){var t=e.originalEvent,i=Math.abs(t.changedTouches[0].pageX-o.touch.start.x),n=Math.abs(t.changedTouches[0].pageY-o.touch.start.y);if(3*i>n&&o.settings.preventDefaultSwipeX?e.preventDefault():3*n>i&&o.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=o.settings.mode&&o.settings.oneToOneTouch){var s=0;if("horizontal"==o.settings.mode){var a=t.changedTouches[0].pageX-o.touch.start.x;s=o.touch.originalPos.left+a}else{var a=t.changedTouches[0].pageY-o.touch.start.y;s=o.touch.originalPos.top+a}x(s,"reset",0)}},O=function(e){o.viewport.unbind("touchmove",R);var t=e.originalEvent,i=0;if(o.touch.end.x=t.changedTouches[0].pageX,o.touch.end.y=t.changedTouches[0].pageY,"fade"==o.settings.mode){var n=Math.abs(o.touch.start.x-o.touch.end.x);n>=o.settings.swipeThreshold&&(o.touch.start.x>o.touch.end.x?a.goToNextSlide():a.goToPrevSlide(),a.stopAuto())}else{var n=0;"horizontal"==o.settings.mode?(n=o.touch.end.x-o.touch.start.x,i=o.touch.originalPos.left):(n=o.touch.end.y-o.touch.start.y,i=o.touch.originalPos.top),!o.settings.infiniteLoop&&(0==o.active.index&&n>0||o.active.last&&0>n)?x(i,"reset",200):Math.abs(n)>=o.settings.swipeThreshold?(0>n?a.goToNextSlide():a.goToPrevSlide(),a.stopAuto()):x(i,"reset",200)}o.viewport.unbind("touchend",O)},G=function(t){if(o.initialized){var i=e(window).width(),n=e(window).height();(r!=i||d!=n)&&(r=i,d=n,a.redrawSlider(),o.settings.onSliderResize.call(a,o.active.index))}};return a.goToSlide=function(t,i){if(!o.working&&o.active.index!=t){if(o.working=!0,o.oldIndex=o.active.index,o.active.index=0>t?m()-1:t>=m()?0:t,o.settings.onSlideBefore(o.children.eq(o.active.index),o.oldIndex,o.active.index),"next"==i?o.settings.onSlideNext(o.children.eq(o.active.index),o.oldIndex,o.active.index):"prev"==i&&o.settings.onSlidePrev(o.children.eq(o.active.index),o.oldIndex,o.active.index),o.active.last=o.active.index>=m()-1,o.settings.pager&&L(o.active.index),o.settings.controls&&E(),"fade"==o.settings.mode)o.settings.adaptiveHeight&&o.viewport.height()!=p()&&o.viewport.animate({height:p()},o.settings.adaptiveHeightSpeed),o.children.filter(":visible").fadeOut(o.settings.speed).css({zIndex:0}),o.children.eq(o.active.index).css("zIndex",o.settings.slideZIndex+1).fadeIn(o.settings.speed,function(){e(this).css("zIndex",o.settings.slideZIndex),D()});else{o.settings.adaptiveHeight&&o.viewport.height()!=p()&&o.viewport.animate({height:p()},o.settings.adaptiveHeightSpeed);var n=0,s={left:0,top:0};if(!o.settings.infiniteLoop&&o.carousel&&o.active.last)if("horizontal"==o.settings.mode){var r=o.children.eq(o.children.length-1);s=r.position(),n=o.viewport.width()-r.outerWidth()}else{var d=o.children.length-o.settings.minSlides;s=o.children.eq(d).position()}else if(o.carousel&&o.active.last&&"prev"==i){var l=1==o.settings.moveSlides?o.settings.maxSlides-$():(m()-1)*$()-(o.children.length-o.settings.maxSlides),r=a.children(".ui-clone").eq(l);s=r.position()}else if("next"==i&&0==o.active.index)s=a.find("> .ui-clone").eq(o.settings.maxSlides).position(),o.active.last=!1;else if(t>=0){var c=t*$();s=o.children.eq(c).position()}if("undefined"!=typeof s){var u="horizontal"==o.settings.mode?-(s.left-n):-s.top;x(u,"slide",o.settings.speed)}}o.settings.auto&&a.startAuto()}},a.goToNextSlide=function(){if(o.settings.infiniteLoop||!o.active.last){var e=parseInt(o.active.index)+1;a.goToSlide(e,"next")}},a.goToPrevSlide=function(){if(o.settings.infiniteLoop||0!=o.active.index){var e=parseInt(o.active.index)-1;a.goToSlide(e,"prev")}},a.startAuto=function(e){o.interval||(o.interval=setInterval(function(){"next"==o.settings.autoDirection?a.goToNextSlide():a.goToPrevSlide()},o.settings.pause),o.settings.autoControls&&1!=e&&M("stop"))},a.stopAuto=function(e){o.interval&&(clearInterval(o.interval),o.interval=null,o.settings.autoControls&&1!=e&&M("start"))},a.getCurrentSlide=function(){return o.active.index},a.getCurrentSlideElement=function(){return o.children.eq(o.active.index)},a.getSlideCount=function(){return o.children.length},a.redrawSlider=function(){o.children.add(a.find(".ui-clone")).width(f()),o.viewport.css("height",p()),o.settings.ticker||_(),o.active.last&&(o.active.index=m()-1),o.active.index>=m()&&(o.active.last=!0),o.settings.pager&&!o.settings.pagerCustom&&(w(),L(o.active.index))},a.destroySlider=function(){o.initialized&&(o.initialized=!1,e(".ui-clone",this).remove(),o.children.each(function(){void 0!=e(this).data("origStyle")?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),void 0!=e(this).data("origStyle")?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),o.controls.el&&o.controls.el.remove(),o.controls.next&&o.controls.next.remove(),o.controls.prev&&o.controls.prev.remove(),o.pagerEl&&o.settings.controls&&o.pagerEl.remove(),e(".ui-caption",this).remove(),o.controls.autoEl&&o.controls.autoEl.remove(),clearInterval(o.interval),o.settings.responsive&&e(window).unbind("resize",G))},a.reloadSlider=function(e){void 0!=e&&(s=e),a.destroySlider(),l()},l(),this}}(jQuery)},function(e,t,i){MI.alert=function(e){var t,n,s={msg:"温馨提示",isConfirm:!1,onCancel:$.noop,onConfirm:$.noop},o=$.extend(s,e),a=i(5),r=$("#J_miAlert");o.msg&&(r.length||($("body").append(a),r=$("#J_miAlert")),t=r.find("#J_miAlertCancel"),n=r.find("#J_miAlertConfirm"),o.isConfirm?("function"==typeof o.onCancel&&t.on("click",o.onCancel),"function"==typeof o.onConfirm&&n.on("click",o.onConfirm)):t.remove(),r.find("#J_miAlertMsg").html(o.msg),r.modal("show"))}},function(e,t){e.exports=function(e){var t='<div class="modal fade modal-hide  modal-alert" id="J_miAlert" > <a class="close" data-dismiss="modal"  href="javascript: void(0);"><i class="iconfont">&#xe602;</i></a> <div class="modal-bd"> <div class="text"> <h3 id="J_miAlertMsg"></h3> </div> <div class="actions"> <button class="btn btn-gray" data-dismiss="modal" id="J_miAlertCancel">取消</button> <button class="btn btn-primary"  data-dismiss="modal" id="J_miAlertConfirm">确定</button> </div> </div></div>';return t}},function(e,t,i){var n;!function(){"use strict";function s(e,t,i){return("string"==typeof t?t:t.toString()).replace(e.define||l,function(t,n,s,o){return 0===n.indexOf("def.")&&(n=n.substring(4)),n in i||(":"===s?(e.defineParams&&o.replace(e.defineParams,function(e,t,s){i[n]={arg:t,text:s}}),n in i||(i[n]=o)):new Function("def","def['"+n+"']="+o)(i)),""}).replace(e.use||l,function(t,n){e.useParams&&(n=n.replace(e.useParams,function(e,t,n,s){if(i[n]&&i[n].arg&&s){var o=(n+":"+s).replace(/'|\\/g,"_");return i.__exp=i.__exp||{},i.__exp[o]=i[n].text.replace(new RegExp("(^|[^\\w$])"+i[n].arg+"([^\\w$])","g"),"$1"+s+"$2"),t+"def.__exp['"+o+"']"}}));var o=new Function("def","return "+n)(i);return o?s(e,o,i):o})}function o(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var a,r={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};r.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(i,function(e){return t[e]||e}):""}},a=function(){return this||(0,eval)("this")}(),"undefined"!=typeof e&&e.exports?e.exports=r:(n=function(){return r}.call(t,i,t,e),!(void 0!==n&&(e.exports=n)));var d={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},l=/$^/;r.template=function(e,t,i){t=t||r.templateSettings;var n,c,u=t.append?d.append:d.split,h=0,p=t.use||t.define?s(t,e,i||{}):e;p=("var out='"+(t.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(t.interpolate||l,function(e,t){return u.start+o(t)+u.end}).replace(t.encode||l,function(e,t){return n=!0,u.startencode+o(t)+u.end}).replace(t.conditional||l,function(e,t,i){return t?i?"';}else if("+o(i)+"){out+='":"';}else{out+='":i?"';if("+o(i)+"){out+='":"';}out+='"}).replace(t.iterate||l,function(e,t,i,n){return t?(h+=1,c=n||"i"+h,t=o(t),"';var arr"+h+"="+t+";if(arr"+h+"){var "+i+","+c+"=-1,l"+h+"=arr"+h+".length-1;while("+c+"<l"+h+"){"+i+"=arr"+h+"["+c+"+=1];out+='"):"';} } out+='"}).replace(t.evaluate||l,function(e,t){return"';"+o(t)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),n&&(t.selfcontained||!a||a._encodeHTML||(a._encodeHTML=r.encodeHTMLSource(t.doNotSkipEncoded)),p="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+r.encodeHTMLSource.toString()+"("+(t.doNotSkipEncoded||"")+"));"+p);try{return new Function(t.varname,p)}catch(g){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+p),g}},r.compile=function(e,t){return r.template(e,null,t)}}()},function(e,t){$.extend({miCountdown:function(e){var t={startTime:"",endTime:"",timer:"",onTime:$.noop,onStart:$.noop,onEnd:$.noop},i=$.extend(t,e);if(i.startTime&&i.endTime){var n=$.isNumeric(i.startTime)?i.startTime:new Date(i.startTime).getTime()/1e3,s=$.isNumeric(i.endTime)?i.endTime:new Date(i.endTime).getTime()/1e3,o=(new Date).getTime()/1e3,a=function(){clearTimeout(i.timer),o>=n&&s>o?"function"==typeof i.onStart&&i.onStart(o):o>=s?"function"==typeof i.onEnd&&i.onEnd(o):(i.onTime(n-o),i.timer=setTimeout(function(){o+=1,a()},1e3))};$.ajax({url:"//time.hd.mi.com/gettimestamp",dataType:"script",cache:!0,timeout:1e4,error:function(){a()},success:function(){servertime&&"number"==typeof servertime&&(o=servertime),a()}})}}})},function(e,t){MI.namespace("selectAddress"),MI.selectAddress=function(){this.options={wrapperElm:"#J_selectAddressWrapper",optionsWrapper:".J_optionsWrapper",selectWrapper:"#J_selectWrapper",maxLevel:4,afterFormat:$.noop,selectEnd:$.noop}},MI.selectAddress.prototype={constructor:MI.selectAddress,init:function(e){var t=this;"object"==typeof e&&(t.options=$.extend(t.options,e)),t.$wrapper=$(t.options.wrapperElm),t.$wrapper.length&&(t.addrUrl="//s1.mi.com/open/common/js/address_all_new.js?v=7930814",t.addressData=[],t.addrTemp=multiline(function(){/*!@tpl
	          <div class="select-box clearfix" id="J_selectWrapper">
	              <div class="select-first select-item J_select" data-init-txt="选择省份/自治区">选择省份/自治区</div>
	              <div class="select-item J_select hide" data-init-txt="选择城市/地区"></div>
	              <div class="select-item J_select hide" data-init-txt="选择区县"></div>
	              <div class="select-last select-item J_select hide" data-init-txt="选择配送区域"></div>
	          </div>

	          <div class="options-box">
	              <ul class="options-list J_optionsWrapper clearfix">
	                  {{~it :value:index}}
	                      <li class="option J_option"
	                      data-value="{{=value.id}}"
	                      data-txt="{{=value.name}}">{{=value.name}}
	                      </li>
	                  {{~}}
	              </ul>
	              <ul class="options-list J_optionsWrapper clearfix hide"></ul>
	              <ul class="options-list J_optionsWrapper clearfix hide"></ul>
	              <ul class="options-list J_optionsWrapper clearfix hide"></ul>
	          </div>
	        */
console.log()}),t.optionTemp=multiline(function(){/*!@tpl
	          {{~it :value:index}}
	            {{? value.region_id}}
	            <li class="J_option" data-txt="{{=value.region_name}}" data-value="{{=value.region_id}}">
	            {{=value.region_name}}</li>
	            {{?? }}
	            <li class="J_option" data-txt="{{=value.name}}" data-value="{{=value.id}}">{{=value.name}}</li>
	            {{? }}
	          {{~}}
	        */
console.log()}),t.result={},t.lastLevel=t.options.maxLevel-1,t.getAllRegions())},getAllRegions:function(){var e=this;$.ajax({url:e.addrUrl,dataType:"script",cache:!0,timeout:3e4,error:function(){},success:function(){"undefined"!=typeof window.data&&(e.addressData=window.data),e.formatRegions()}})},formatRegions:function(){var e=this,t=doT.template(e.addrTemp),i=t(e.addressData);e.$wrapper.html(i),e.$optionsWrapper=e.$wrapper.find(e.options.optionsWrapper),e.$selectWrapper=e.$wrapper.find(e.options.selectWrapper),e.selectEvent(),"function"==typeof e.options.afterFormat&&e.options.afterFormat()},selectEvent:function(){var e=this,t=0;e.$selectWrapper.on("click.seladdr",".J_select",function(){var i=$(this).addClass("active"),n=$(this).attr("data-init-txt");i&&(t=$(this).index(),e.$selectWrapper.find(".J_select:gt("+t+")").addClass("hide").removeClass("active"),e.$optionsWrapper.addClass("hide").eq(t).removeClass("hide"),$(this).html(n).removeClass("active"))}),e.$optionsWrapper.on("click.seladdr",".J_option",function(){var i=parseInt($(this).attr("data-value")),n=$(this).attr("data-txt"),s=t+1,o=e.$selectWrapper.find(".J_select").eq(s);return e.result[t]={id:i,name:n},e.$selectWrapper.find(".J_select").eq(t).html(n).addClass("active"),t===e.lastLevel?void("function"==typeof e.options.selectEnd&&e.options.selectEnd(e.result)):(t+=1,s>=e.lastLevel?e.getLastLevelData():e.formatNextLevelOption(i,s),void(o.length&&o.html(o.attr("data-init-txt")).removeClass("hide")))})},getAddressLevelData:function(e){var t=[],i=this;return $.each(i.addressData,function(i,n){return n.id===e?(t=n.child,!1):void(n.child&&$.each(n.child,function(i,n){return n.id===e?(t=n.child,!1):void(n.child&&$.each(n.child,function(i,n){return n.id===e?(t=n.tags,!1):void 0}))}))}),t},formatNextLevelOption:function(e,t){if(e){var i=this,n=i.getAddressLevelData(e,t),s=i.formatOption(n);i.$optionsWrapper.addClass("hide").eq(t).html(s).removeClass("hide"),1===n.length&&setTimeout(function(){i.$optionsWrapper.eq(t).find(".J_option").eq(0).trigger("click")},50)}},getLastLevelData:function(){var e=this,t=MI.GLOBAL_CONFIG.orderSite+"/api/getAddressRegion.php";e.$optionsWrapper.addClass("hide").eq(e.lastLevel).html('<div class="loading"><div class="loader"></div></div>').removeClass("hide"),$.ajax({url:t,dataType:"jsonp",jsonp:"jsonpcallback",data:{parent:e.result[2].id},tiemout:3e4,error:function(){},success:function(t){if(t&&t.data.regions){var i=[];$.each(t.data.regions,function(e,t){i.push(t)});var n=e.formatOption(i);e.$optionsWrapper.eq(e.lastLevel).html(n)}}})},formatOption:function(e){var t=this,i="";return e?i=doT.template(t.optionTemp)(e):void 0},getResult:function(){return this.result}},MI.namespace("buyChooseAddress"),MI.buyChooseAddress={init:function(e){var t=this,i={isShowStreet:!0,showTrigger:"#J_switchChooseRegions",afterChoose:$.noop};t.options=$.extend(i,e),t.apiUrl={my:MI.GLOBAL_CONFIG.orderSite+"/address/getAddressList","default":MI.GLOBAL_CONFIG.orderSite+"/address/getDefaultAddress",search:MI.GLOBAL_CONFIG.orderSite+"/address/searchByKeywords",translate:MI.GLOBAL_CONFIG.orderSite+"/address/getAreaInfoByLocation",save:MI.GLOBAL_CONFIG.orderSite+"/address/setDefaultAddress",login:MI.GLOBAL_CONFIG.orderSite+"/site/login?redirectUrl="+location.href},t.$userDefault=$("#J_userDefaultAddress"),t.$input=$("#J_searchRegionsInput"),t.$inputClear=$("#J_searchRegionsInputClear"),t.$searchWrapper=$("#J_searchAddressWrapper"),t.$loading=t.$searchWrapper.find(".loading"),t.$myAddr=t.$searchWrapper.find("#J_myAddress"),t.$myAddrList=t.$myAddr.find(".list"),t.$noLogin=t.$myAddr.find("#J_noLogin"),t.$nearbyAddr=t.$searchWrapper.find("#J_nearbyAddress"),t.$nearbyAddrList=t.$nearbyAddr.find(".list"),t.$searchAddr=t.$searchWrapper.find("#J_searchAdress"),t.$searchAddrList=t.$searchAddr.find(".list"),t.$noResult=t.$searchWrapper.find("#J_noSearchResult"),t.searchVal=null,t.nearbyData=null,t.myData=null,t.$noLogin.find("a").attr("href",t.apiUrl.login),t.selectAddress=new MI.selectAddress,t.selectAddress.init({selectEnd:function(e){t.formatChooseResult(e)}}),t.checkLogin(),t.searchEvent(),t.selectEvent(),t.switchType(),t.getDefaultAddress(),t.showChooseRegions()},showChooseRegions:function(){var e=this,t=$("#J_modalChooseRegions");$(e.options.showTrigger).on("click",function(){var i=e.$userDefault.offset();$(window).scrollTop()+$(window).height()<i.top+t.height()&&(i.top-=t.height(),i.top+=$("#J_userDefaultAddress").height()),t.css({top:i.top,left:i.left}).modal("show").one("hidden",function(){e.revert()}),e.getMyAddress()})},checkLogin:function(){this.isLogin=$.cookie("userId")&&$.cookie("xm_order_btauth")?!0:!1},revert:function(){this.$input.val(""),this.searchVal=null,this.toggleShow(this.$myAddr,!0),this.toggleShow(this.$nearbyAddr,!1),this.toggleShow(this.$searchAddr,!1),this.toggleShow(this.$noResult,!1)},searchEvent:function(){var e,t,i=this,n=200;i.$input.on({focus:function(){i.toggleShow(i.$myAddr,!1),i.toggleShow(i.$loading,!0),i.searchVal?i.searchAddress():i.nearbyData?i.formatAddress(i.nearbyData,null,"nearby"):i.searchAddress()},blur:function(){t&&clearTimeout(t),t=setTimeout(function(){i.toggleShow(i.$nearbyAddr,!1),i.toggleShow(i.$searchAddr,!1),i.toggleShow(i.$noResult,!1),i.toggleShow(i.$myAddr,!0)},200)},keyup:function(){e&&clearTimeout(e),e=setTimeout(function(){i.searchVal=$.trim(i.$input.val().replace(/[\-_'=+|\\\/]/g," ")),i.searchVal?i.toggleShow(i.$inputClear,!0):i.toggleShow(i.$inputClear,!1),i.toggleShow(i.$myAddr,!1),i.toggleShow(i.$nearbyAddr,!1),i.toggleShow(i.$searchAddr,!1),i.toggleShow(i.$noResult,!1),i.toggleShow(i.$loading,!0),i.searchAddress()},n)}}),i.$inputClear.on("click",function(){i.searchVal=null,i.$input.val("").focus(),i.toggleShow(i.$inputClear,!1)})},selectEvent:function(){var e=this;e.$myAddrList.on("click",".J_addrItem",function(){var t=$(this).index();delete e.myData[t].consignee,e.formatChooseResult(e.myData[t])}),$.each([e.$nearbyAddrList,e.$searchAddrList],function(t,i){i.on("click",".J_addrItem",function(){var t=$(this).attr("data-code"),i=$(this).attr("data-location");e.translateSearchResult({code:t,location:i})})})},toggleShow:function(e,t){t?e.removeClass("hide"):e.addClass("hide")},switchType:function(){$(".J_switchTypeTrigger").on("click",function(){var e=$(this).attr("data-type");e&&$(".J_chooseRegionsBox[data-type="+e+"]").removeClass("hide").siblings(".J_chooseRegionsBox").addClass("hide")})},getDefaultAddress:function(){var e=this;$.ajax({url:e.apiUrl["default"],dataType:"jsonp",jsonp:"jsonpcallback",timeout:3e4,cache:!0,error:function(){},success:function(t){t&&1===t.code&&e.formatChooseResult(t.data,!0)}})},getMyAddress:function(){var e=this;return e.isLogin?void(e.myData||$.ajax({url:e.apiUrl.my,dataType:"jsonp",jsonp:"jsonpcallback",timeout:3e4,cache:!0,error:function(){},success:function(t){t&&1===t.code?(e.myData=t.data,e.formatAddress(t.data,e.myAddressPage,"my")):-2===t.code&&(e.toggleShow(e.$loading,!1),e.toggleShow(e.$myAddr,!0))}})):(e.toggleShow(e.$loading,!1),void e.toggleShow(e.$myAddr,!0))},searchAddress:function(){var e=this,t=e.searchVal?"search":"nearby";$.ajax({url:e.apiUrl.search,dataType:"jsonp",jsonp:"jsonpcallback",data:{keywords:e.searchVal},timeout:3e4,cache:!0,error:function(){},success:function(i){if(i&&1===i.code){if(!i.data||!i.data.length)return e.toggleShow(e.$loading,!1),void("search"===t&&e.toggleShow(e.$noResult,!0));e.searchVal||(e.nearbyData=i.data),e.formatAddress(i.data.slice(0,5),null,t)}}})},formatAddress:function(e,t,i){if(e){var n=this,s=multiline(function(){/*!@tpl
	        {{~it :value:index}}
	            <li class="J_addrItem">
	                <div class="address-title">
	                    <span class="item">{{=value.consignee}}</span>
	                    <span class="item">{{=value.province.name}}</span>
	                </div>
	                <div class="address-desc">
	                    {{=value.city.name}}{{=value.district.name}}{{=value.area.name}}
	                </div>
	            </li>
	        {{~}}
	        */
console.log()}),o=multiline(function(){/*!@tpl
	        {{~it :value:index}}
	            <li class="J_addrItem" data-code="{{=value.adcode ? value.adcode : ''}}"
	            data-location="{{=value.location}}">
	                <div class="address-title">
	                    <span class="item">{{=value.name}}</span>
	                </div>
	                <div class="address-desc">
	                    {{=value.pname}}{{=value.cityname}}{{=value.adname}}
	                </div>
	                <a class="btn btn-primary">选择</a>
	            </li>
	        {{~}}
	        */
console.log()}),a="";n.toggleShow(n.$loading,!1),n.toggleShow(n.$myAddr,!1),n.toggleShow(n.$noResult,!1),i&&"my"===i?(a=doT.template(s)(e),n.$myAddrList.html(a),n.toggleShow(n.$noLogin,!1),n.toggleShow(n.$myAddr,!0)):"nearby"===i?(a=doT.template(o)(e),n.$nearbyAddrList.html(a),n.toggleShow(n.$nearbyAddr,!0)):"search"===i&&(a=doT.template(o)(e),n.$searchAddrList.html(a),n.toggleShow(n.$searchAddr,!0)),"function"==typeof t&&$.proxy(t,n)()}},myAddressPage:function(){function e(){s.$myAddrList.css({"margin-top":h*(l-1)*-1+"px"}),n.text(l)}var t,i,n,s=this,o=s.$myAddrList.find(".J_addrItem"),a=o.length,r=4,d=a%r>0?parseInt(a/r)+1:a/r,l=1,c=multiline(function(){/*!@tpl
	          <div class="page-controller">
	              <a href="javascript:void(0);" class="iconfont page-prev">&#xe629;</a>
	              <span class="page-num"><i class="curr">{{=it.curr}}</i> / <i class="total">{{=it.total}}</i></span>
	              <a href="javascript:void(0);" class="iconfont page-next">&#xe624;</a>
	          </div>
	        */
console.log()}),u="",h=2*o.outerHeight();1>=d||(s.$myAddrList.parent().css({height:h,overflow:"hidden"}),u=doT.template(c)({curr:l,total:d}),s.$myAddr.append(u),n=s.$myAddr.find(".curr"),i=s.$myAddr.find(".page-next"),t=s.$myAddr.find(".page-prev"),t.on("click",function(){l>1&&(l-=1),e()}),i.on("click",function(){d>l&&(l+=1),e()}))},translateSearchResult:function(e){var t=this;$.ajax({url:t.apiUrl.translate,dataType:"jsonp",jsonp:"jsonpcallback",data:{adcode:e.code,location:e.location},timeout:3e4,error:function(){},success:function(e){e&&1===e.code&&t.formatChooseResult(e.data)}})},formatChooseResult:function(e,t){var i=this,n="",s=[];$.each(e,function(e,t){s.push({id:t.id,name:t.name})}),t||i.saveResult(s),$.each(s,function(e,t){!i.options.isShowStreet&&e>=3||(n+='<span class="item">'+t.name+"</span>")}),i.$userDefault.removeClass("hide").find(".address-info").html(n),"function"==typeof i.options.afterChoose&&i.options.afterChoose(s)},saveResult:function(e){var t=this,i={province:{id:e[0].id,name:e[0].name},city:{id:e[1].id,name:e[1].name},district:{id:e[2].id,name:e[2].name},area:{id:e[3].id,name:e[3].name}};$.ajax({url:t.apiUrl.save,dataType:"jsonp",jsonp:"jsonpcallback",data:{address:i},timeout:3e4,error:function(){},success:function(){}})}}},function(e,t,i){MI.proNav=function(e){var t=i(10),n=$("#J_proHeader").find("h2").text();$("#J_proHeader").html(t(n)),window.tarList=[];var s=window.tarList,o=function(){var e=$(window).scrollTop();for(var t in s)if(s.hasOwnProperty(t)){var i=s[t],n=i.top;e>n?i.callback(i,e):i.reverse&&i.reverse(i,e)}};$(window).on("scroll",function(){o()}),0===$(".J_miOneScroller").length&&$("html,body").animate({scrollTop:1===$("#J_proHeader").length?$("#J_proHeader").offset().top:140},1e3),e=e||{};var a={id:e.id?e.id:"",target:e.target?e.target:""},r=function(){var e=140;1===$("#J_proHeader").length&&(e=$("#J_proHeader").offset().top+$("#J_proHeader").height());var t=e;s.push({top:t,callback:function(){$("#J_fixNarBar").addClass("nav_fix")},reverse:function(){$("#J_fixNarBar").removeClass("nav_fix")}})},d={};a.id?d.product_id=a.id:d.url="http://"+window.location.host+window.location.pathname,$.ajax({type:"GET",url:"http://order.mi.com/product/gettabinfo",data:d,dataType:"jsonp",jsonp:"jsonpcallback",timeout:1e4,success:function(e){if(1===e.code&&(e=e.data,e.link)){e.link.id=a.id||e.link.product_id,e.link.target=a.target,e.link.domain=MI.GLOBAL_CONFIG.itemSite,e.link.url="http://"+window.location.host+window.location.pathname;var t=i(11);$(".J_navSwitch").find(".con").html(t(e.link)),$(".J_buyBtn").attr("href",MI.GLOBAL_CONFIG.itemSite+"/product/"+e.link.id+".html"),r()}}})}},function(e,t){e.exports=function(e){var t='<div class="xm-product-box"> <div class="nav-bar" id="J_headNav"> <div class="container J_navSwitch"> <h2 class="J_proName">'+e+'</h2> <div class="con"></div> </div> </div></div><div class="xm-product-box nav-bar-hidden" id="J_fixNarBar"> <div class="nav-bar" > <div class="container J_navSwitch"> <h2 class="J_proName">'+e+'</h2> <div class="con"></div> </div> </div></div>';return t}},function(e,t){e.exports=function(e){var t="";if(e.left&&e.left.length>0){t+='<div class="left"> ';var i=e.left;if(i)for(var n,s=-1,o=i.length-1;o>s;)n=i[s+=1],t+=" ",n.url===e.url?t+=' <a  href="javascript:void(0);" class="cur" >'+n.title+"</a> ":(t+=' <a  href="'+n.url+'" ',n.is_new_page&&(t+='target="_blank"'),t+=">"+n.title+"</a> "),t+=" ",s!=e.left.length-1&&(t+=' <span class="separator">|</span> '),t+=" ";t+="</div>"}if(t+='<div class="right">',e.right&&e.right.length>0){t+=" ";var a=e.right;if(a)for(var n,s=-1,r=a.length-1;r>s;)n=a[s+=1],t+=" ",n.url===e.url?t+=' <a  href="javascript:void(0);" class="cur" >'+n.title+"</a> ":(t+=' <a  href="'+n.url+'" ',n.is_new_page&&(t+='target="_blank"'),t+=">"+n.title+"</a> "),t+=' <span class="separator">|</span> '}return e.id&&(t+=" ","buy"===e.target&&(t+=' <a href="'+e.domain+"/comment/"+e.id+'.html">用户评价</a> '),t+=" ","comment"===e.target&&(t+=' <a href="javascript:void(0);" class="cur">用户评价</a> <a href="'+e.domain+"/product/"+e.id+'.html" class="btn btn-small btn-primary" >立即购买</a> '),t+=" ","buy"!==e.target&&"comment"!==e.target&&(t+=' <a href="'+e.domain+"/comment/"+e.id+'.html" >用户评价</a> <a href="'+e.domain+"/product/"+e.id+'.html" class="btn btn-small btn-primary" >立即购买</a> ')),t+="</div>"}}]);