!function(t){function e(r){if(a[r])return a[r].exports;var i=a[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){t.exports=a(1)},function(t,e,a){var r=a(2);$(function(){var t={$wrap:$(".J_o_m"),$pager:$(".J_mPager",this.$wrap),$addrType:$(".J_addrType",this.$wrap),$messageList:$(".J_mList",this.$wrap),$itemHtml:$("#item-temp").html(),pageSize:10,mListUrl:MI.GLOBAL_CONFIG.orderSite+"/message/getList",setReadUrl:MI.GLOBAL_CONFIG.orderSite+"/message/setRead",totalPages:0,init:function(){var t=this.getUrlParam();this.curPage=parseInt(t.page),this.renderCurrentType(t),this.getJsonp({url:this.setReadUrl,callback:function(){}}),this.getJsonp({url:this.mListUrl,data:t,callback:this.renderTemplate}),this.bindEvent()},bindEvent:function(){this.$addrType.on("click","li",$.proxy(this.onTypeClick,this)),this.$pager.on("click","a",$.proxy(this.onPagerClick,this))},renderCurrentType:function(t){var e=0;switch(t.category){case"all":e=0;break;case"activity":e=3;break;case"express":e=1;break;case"comment":e=2}this.$addrType.find("li").removeClass("active").eq(e).addClass("active")},onPagerClick:function(t){var e=$(t.currentTarget);this.curPage=e.data("pager");var a=this.$addrType.find(".active").find("a").attr("href");location.hash=a+"&page="+this.curPage;var r=this.getUrlParam();return this.getJsonp({url:this.mListUrl,data:r,callback:this.renderTemplate}),!1},onTypeClick:function(t){var e=$(t.currentTarget);if(e.hasClass("active"))return!1;e.addClass("active").siblings("li").removeClass("active");var a=e.find("a").attr("href");this.curPage=1,location.hash=a;var r=this.getUrlParam();return this.getJsonp({url:this.mListUrl,data:r,callback:this.renderTemplate}),!1},renderTemplate:function(t){t=t||{};var e=t.code,a=(new Date).getFullYear();if(0===e){var r=t.data.msg_list||[],i=r.length;if(i>0){for(var s=0;i>s;s++){var n=new Date(1e3*r[s].addtime),l=n.getHours()<10?"0"+n.getHours():n.getHours(),o=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),c=n.getFullYear()===a?"":n.getFullYear()+"年";r[s].mDate=c+(n.getMonth()+1)+"月"+n.getDate()+"日 "+l+":"+o,r[s].pid=r[s].traceid,r[s].aid="AA13520"}this.totalPages=Math.ceil(t.data.total/this.pageSize),this.$messageList.html(doT.template(this.$itemHtml)(r)),this.updatePager(this.totalPages,1),"undefined"!=typeof _msq&&_msq.push(["trackPanelShow","J_msgList","消息通知"])}else this.$messageList.html('<div class="no-data">暂无数据</div>'),this.$pager.html("")}else this.$messageList.html('<div class="no-data">程序员已使出洪荒之力了，请稍后再试。</div>'),this.$pager.html("")},updatePager:function(t){t=t||1,t>1&&r(this.$pager,t,this.curPage,null)},getJsonp:function(t){var e=this,a={url:"",dataType:"jsonp",jsonp:"jsonpcallback",data:{},callback:function(){}},r=$.extend(!0,a,t);$.ajax({url:r.url,dataType:r.dataType,jsonp:r.jsonp,data:r.data,timeout:5e3,error:function(){alert("网路错误,请刷新重试!")},success:function(t){r.callback.call(e,t)}})},getUrlParam:function(){var t={category:"",page:1,size:this.pageSize},e=location.hash;if(""!==e){e=e.substring(1);var a=e.split("&");$.each(a,function(){var e=this,a=e.split("=");t[a[0]]=a[1]})}return t}};t.init()})},function(t,e){function a(){return multiline(function(){/*!@tpl
	<div class="xm-pagenavi">
	  {{?it.pre}}
	  <a href="{{=it.opt.linkprefix}}{{=it.pre}}" class="numbers first"
	    data-pager="{{=it.pre}}"><span class="iconfont">&#xe629;</span></a>
	  {{??}}
	  <span class="numbers first"><span class="iconfont">&#xe629;</span></span>
	  {{?}}

	  {{?it.isF&&it.index==1}}
	  <span class="numbers current">1</span>
	  {{??it.isF&&it.index!=1}}
	  <a href="{{=it.opt.linkprefix}}1" class="numbers" data-pager="1">1</a>
	  {{?}}

	  {{?it.startXu}}
	  <span class="numbers">..</span>
	  {{?}}

	  {{for(var i=it.start;i<=it.end;i++){ }}
	  {{?i==it.index}}<span class="numbers current">{{=i}}</span>{{??}}
	  <a href="{{=it.opt.linkprefix}}{{=i}}" class="numbers" data-pager="{{=i}}">{{=i}}</a>{{?}}
	  {{ } }}

	  {{?it.endXu}}<span class="numbers">…</span>{{?}}

	  {{?it.isF&&it.index==it.pageAmount}}
	  <span class="numbers current">{{=it.pageAmount}}</span>
	  {{??it.isF&&it.index!=it.pageAmount}}
	  <a href="{{=it.opt.linkprefix}}{{=it.pageAmount}}" class="numbers"
	    data-pager="{{=it.pageAmount}}">{{=it.pageAmount}}</a>
	  {{?}}

	  {{?it.next}}
	  <a href="{{=it.opt.linkprefix}}{{=it.next}}" class="numbers last"
	    data-pager="{{=it.next}}"><span class='iconfont'>&#xe624;</span></a>{{??}}
	  <span class="numbers last"><span class='iconfont'>&#xe624;</span></span>
	  {{?}}
	</div>
	  */
console.log()})}var r=function(t,e,r,i){var s={};r||(r=1);var n={linkprefix:"#"};s.opt=$.extend({},n,i),s.index=r,s.start=1,s.end=e,s.pageAmount=e,s.endXu=!1,s.pre="",s.next=s.index+1,s.startXu=!1,s.isF=!1,1===r?(s.pre="",s.next=1===e?"":r+1):r===e?(s.next="",s.pre=1===e?"":r-1):(s.pre=r-1,s.next=r+1),8>e?(s.start=1,s.end=e):(s.isF=!0,5>r?(s.start=2,s.end=5,s.startXu=!1,s.endXu=!0):r>e-5?(s.start=e-5,s.end=e-1,s.startXu=!0,s.endXu=!1):(s.start=r-2,s.end=r+2,s.end>e-1&&(s.end=e-1),s.startXu=!0,s.endXu=!0));var l=a(),o=doT.template(l),c=o(s);t.html(c)};t.exports=r}]);