!function(t){function a(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}var e={};return a.m=t,a.c=e,a.p="",a(0)}([function(t,a,e){t.exports=e(1)},function(t,a,e){e(2);var n=e(7),i=e(8),r=e(9),o=e(10),s=e(11),c=e(21);$(function(){function t(){l.html(n),m=l.find(".J_commentSummary"),d=l.find(".J_speList"),u=l.find(".J_nav"),a()}function a(){var t=e();Utils.getJsonp({url:CommentUrl.summaryUrl+"?"+Utils.formParam(t)+"&sstart=0&slen=10&astart=0&alen=10",callback:function(t){0===t.code?(t.data.comment_tags&&t.data.comment_tags.length>0?u.html(i(t.data)):u.remove(),t.data.satisfy_rate<=0?m.remove():m.html(r(t.data)),new c({data:t,container:d,temp:o})):u.html('<div class="no-data">暂无数据</div>')}}),new s({goods_id:t.goods_id,v_id:t.v_pid,container:l.find(".J_commentCon"),navContainer:u})}function e(){return{goods_id:Comment2017.comment_proId||"0",v_pid:Comment2017.comment_virtualId||""}}var l=$(".J_commentWrap"),m=null,d=null,u=null,v=parseInt(Comment2017.comment_proId)||Comment2017.comment_virtualId||"";v&&MI.proNav({id:v,target:"comment"}),t()})},function(t,a,e){e(3),window.Utils=e(6);var n=MI.GLOBAL_CONFIG.orderSite,i=Comment2017.commentDomain;window.CommentUrl={checkUpUrl:i+"/comment/entry/checkUp",addAnswerUrl:i+"/comment/entry/reply_v2",upUrl:i+"/comment/entry/up",upCsUrl:i+"/comment/entry/upCustomer",comListUrl:i+"/comment/entry/getList",detailUrl:i+"/comment/entry/commentDetails",replyListUrl:i+"/comment/entry/commentReplyList",summaryUrl:i+"/comment/entry/getSummary",navUrl:n+"/product/gettabinfo"},$(function(){function t(t,a){var e=a.$curBtn||$(".J_hasHelp");if(0===t.code){var n=t.data,i=e.find(".amount"),r=parseInt(i.html()),o=Math.max(0,r+n.up_num);o>0?i.removeClass("hide"):i.addClass("hide"),i.html(o),n.up?e.addClass("cur"):e.removeClass("cur")}}$("body").on("click",".J_scrollTop",function(){$("html, body").animate({scrollTop:0})}),setTimeout(function(){var t=$("body").height(),a=$(".J_scrollTop");if(!a.get(0))return!1;var e=$(".site-footer"),n=a.offset().top;t>1500&&(a.show(),$(window).on("scroll",function(){t=$("body").height();var i=e.offset().top,r=$(window).scrollTop(),o=$(window).height();if(n-o+110>r)a.removeClass("fixed");else if(i-o>r)a.addClass("fixed").css({bottom:0});else{var s=r-i+o+30;a.css({bottom:s})}}))},1e3),$("body").on("click",".J_hasHelp",function(a){var e=$(a.currentTarget);if(!Utils.isLogin())return Utils.login(),!1;var n=$(this).data("commentid"),i=CommentUrl.upUrl+"?comment_id="+n,r={$curBtn:e,count:0};Utils.getJsonp({url:i,callback:function(a){t(a,r)}})}),$("body").on("click",".J_csLike",function(a){var e=$(a.currentTarget);if(!Utils.isLogin())return Utils.login(),!1;var n=$(this).data("commentid"),i=CommentUrl.upCsUrl+"?comment_id="+n,r={$curBtn:e,count:0};Utils.getJsonp({url:i,callback:function(a){t(a,r)}})})})},function(t,a,e){MI.proNav=function(t){var a=e(4),n=$("#J_proHeader").find("h2").text();$("#J_proHeader").html(a(n)),window.tarList=[];var i=window.tarList,r=function(){var t=$(window).scrollTop();for(var a in i)if(i.hasOwnProperty(a)){var e=i[a],n=e.top;t>n?e.callback(e,t):e.reverse&&e.reverse(e,t)}};$(window).on("scroll",function(){r()}),0===$(".J_miOneScroller").length&&$("html,body").animate({scrollTop:1===$("#J_proHeader").length?$("#J_proHeader").offset().top:140},1e3),t=t||{};var o={id:t.id?t.id:"",target:t.target?t.target:""},s=function(){var t=140;1===$("#J_proHeader").length&&(t=$("#J_proHeader").offset().top+$("#J_proHeader").height());var a=t;i.push({top:a,callback:function(){$("#J_fixNarBar").addClass("nav_fix")},reverse:function(){$("#J_fixNarBar").removeClass("nav_fix")}})},c={};o.id?c.product_id=o.id:c.url="http://"+window.location.host+window.location.pathname,$.ajax({type:"GET",url:"http://order.mi.com/product/gettabinfo",data:c,dataType:"jsonp",jsonp:"jsonpcallback",timeout:1e4,success:function(t){if(1===t.code&&(t=t.data,t.link)){t.link.id=o.id||t.link.product_id,t.link.target=o.target,t.link.domain=MI.GLOBAL_CONFIG.itemSite,t.link.url="http://"+window.location.host+window.location.pathname;var a=e(5);$(".J_navSwitch").find(".con").html(a(t.link)),$(".J_buyBtn").attr("href",MI.GLOBAL_CONFIG.itemSite+"/product/"+t.link.id+".html"),s()}}})}},function(t,a){t.exports=function(t){var a='<div class="xm-product-box"> <div class="nav-bar" id="J_headNav"> <div class="container J_navSwitch"> <h2 class="J_proName">'+t+'</h2> <div class="con"></div> </div> </div></div><div class="xm-product-box nav-bar-hidden" id="J_fixNarBar"> <div class="nav-bar" > <div class="container J_navSwitch"> <h2 class="J_proName">'+t+'</h2> <div class="con"></div> </div> </div></div>';return a}},function(t,a){t.exports=function(t){var a="";if(t.left&&t.left.length>0){a+='<div class="left"> ';var e=t.left;if(e)for(var n,i=-1,r=e.length-1;r>i;)n=e[i+=1],a+=" ",n.url===t.url?a+=' <a  href="javascript:void(0);" class="cur" >'+n.title+"</a> ":(a+=' <a  href="'+n.url+'" ',n.is_new_page&&(a+='target="_blank"'),a+=">"+n.title+"</a> "),a+=" ",i!=t.left.length-1&&(a+=' <span class="separator">|</span> '),a+=" ";a+="</div>"}if(a+='<div class="right">',t.right&&t.right.length>0){a+=" ";var o=t.right;if(o)for(var n,i=-1,s=o.length-1;s>i;)n=o[i+=1],a+=" ",n.url===t.url?a+=' <a  href="javascript:void(0);" class="cur" >'+n.title+"</a> ":(a+=' <a  href="'+n.url+'" ',n.is_new_page&&(a+='target="_blank"'),a+=">"+n.title+"</a> "),a+=' <span class="separator">|</span> '}return t.id&&(a+=" ","buy"===t.target&&(a+=' <a href="'+t.domain+"/comment/"+t.id+'.html">用户评价</a> '),a+=" ","comment"===t.target&&(a+=' <a href="javascript:void(0);" class="cur">用户评价</a> <a href="'+t.domain+"/product/"+t.id+'.html" class="btn btn-small btn-primary" >立即购买</a> '),a+=" ","buy"!==t.target&&"comment"!==t.target&&(a+=' <a href="'+t.domain+"/comment/"+t.id+'.html" >用户评价</a> <a href="'+t.domain+"/product/"+t.id+'.html" class="btn btn-small btn-primary" >立即购买</a> ')),a+="</div>"}},function(t,a){var e=MI.GLOBAL_CONFIG.orderSite+"/site/login?redirectUrl="+location.href,n={getJsonp:function(t){var a={url:"",dataType:"jsonp",jsonp:"jsonpcallback",cache:!1,data:{},error:function(){},callback:function(){}},e=$.extend(!0,a,t);$.ajax({url:e.url,dataType:e.dataType,jsonp:e.jsonp,data:e.data,timeout:15e3,cache:e.cache,error:function(){e.error()},success:function(t){e.callback(t)}})},formParam:function(t){var a="";for(var e in t)t.hasOwnProperty(e)&&(a+="&"+e+"="+t[e]);return a.substring(1)},sendRequest:function(t){var a={type:"get",url:"",dataType:"json",cache:!1,data:{},isHideAlert:!1,error:function(){},callback:function(){}},e=$.extend(!0,a,t);$.ajax({type:e.type,url:e.url,dataType:e.dataType,data:e.data,timeout:15e3,cache:e.cache,error:e.error,success:function(t){e.callback(t)}})},getParams:function(t){for(var a=location.search.substring(1),e=a.split("&"),n=0;n<e.length;n++){var i=e[n].split("=");if(i[0]===t)return i[1]}return!1},getGradeInfo:function(t){t=parseInt(t)-1;var a=["失望","一般","满意","喜欢","超爱"],e=["e613","e61f","e60e","e619","e604"];return{loveText:a[t],loveIcon:e[t]}},getHash:function(){return location.hash.substring(1)},calShowTime:function(t,a){var e=t;t=1e3*t;var n=a-e,i=86400,r=3600,o=60,s="",c=function(t){return parseInt(t)<10?"0"+t:t};if(n>=i){var l=n/i;if(l>7){var m=new Date(t).getFullYear(),d=new Date(t).getMonth()+1,u=new Date(t).getDate();s=m+"年"+d+"月"+u+"日"}else if(7>l&&l>=3){var v=["日","一","二","三","四","五","六"],p=new Date(t).getDay();s="星期"+v[p]}else if(3>l&&l>=2){var f=new Date(t).getHours(),h=new Date(t).getMinutes();s="前天 "+c(f)+":"+c(h)}else if(2>l){var g=new Date(t).getHours(),_=new Date(t).getMinutes();s="昨天 "+c(g)+":"+c(_)}}else if(i>n&&n>=r){var w=parseInt(n/r);s=w+"小时前"}else if(r>n&&n>=o){var y=parseInt(n/o);s=y+"分钟前"}else o>n&&(s="刚刚");return s},formDate:function(t){function a(t,a){return(10>t?"0"+t:t)+a}t=1e3*t;var e=new Date(t),n=e.getFullYear()+"年",i=e.getMonth()+1+"月",r=e.getDate()+"日",o=a(e.getHours(),":"),s=a(e.getMinutes(),":"),c=a(e.getSeconds(),"");return n+i+r+" "+o+s+c},imgLoad:function(t,a){var e=new Image;e.src=t.imgsrc,t.img=e,e.complete?a(t):(e.onload=function(){if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();a(t),e.onload=null},e.onerror=function(){t.isError=!0,a(t)})},isLogin:function(){var t=$.cookie("userId");return t?!0:!1},login:function(){location.href=e},revertStr:function(t){var a=String(t).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return encodeURIComponent(a)},dataToHtml:function(t){return t=String(t).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},randomHeadImg:function(t){t=t||$.cookie("userId")||"0";var a=parseInt(t)%5,e="http://c1.mifile.cn/f/i/17/comment2017/",n=["01.jpg","02.jpg","03.jpg","04.jpg","05.jpg"],i=e+n[a];return i},randomBgImg:function(t){t=t||$.cookie("userId")||"0",console.log(t);var a=parseInt(t)%5;console.log(a);var e="http://c1.mifile.cn/f/i/17/comment2017/",n=["s-bg1.jpg","s-bg2.jpg","s-bg3.jpg","s-bg4.jpg","s-bg5.jpg"],i=e+n[a];return i}};t.exports=n},function(t,a){t.exports=function(t){var a='<div class="m-comment-nav J_nav"> <div class="loader"></div></div><div class="row"> <div class="span13 h-comment-main  m-comment-main J_commentCon"> <div class="comment-top"> <h2 class="m-tit">热门评价</h2> <a class="J_showImg show-img" href="javascript:;"> <i class="iconfont">&#x221a;</i> 只显示带图评价 </a> </div> <div class="m-comment-box J_commentList"> <ul class="m-comment-list J_listBody"></ul> <div class="comment-more"> <a class="load-more J_loadMore" href="javascript:;">加载更多</a> </div> </div> </div> <div class="span7 h-comment-fr m-comment-spe"> <div class="m-comment-summary J_commentSummary"> <div class="loader"></div> </div> <h2 class="m-tit">最新评价</h2> <ul class="m-spe-list J_speList"></ul> <a href="javascript:;" class="m-scroll-top J_scrollTop hidden"> </a> </div></div>';return a}},function(t,a){t.exports=function(t){var a='<h2>大家认为</h2><div class="nav-box"> <a class="item cur" data-profileid="0" href="javascript:;"> 全部（'+t.total_count+"）</a> ",e=t.comment_tags;if(e)for(var n,i=-1,r=e.length-1;r>i;)n=e[i+=1],a+=' <a class="item item'+(i+1)+'" data-profileid="'+n.profile_id+'" href="javascript:;"> '+n.tag_name+"（"+n.profile_num+"） </a> ";return a+="</div>"}},function(t,a){t.exports=function(t){var a='<div class="num"> <p class="percent-num"> <span class="m-num">'+parseInt(t.total_count*t.satisfy_rate/100)+'</span> 人购买后满意 </p></div><div class="m-percent-box"> <p class="percent" style="width:'+t.satisfy_rate+'%;">满意度 '+t.satisfy_rate+"%</p></div>";return a}},function(t,a){t.exports=function(t){var a="",e=t;if(e)for(var n,i=-1,r=e.length-1;r>i;)n=e[i+=1],a+='<li class="',i===t.length-1&&(a+=" last "),a+='" data-id="'+n.comment_id+'"> <div class="spe-top"> <span class="time">'+n.showTime+'</span> <a class="" href="/comment/user?user_id='+n.user_id+'">- '+n.user_name+'</a> </div> <div class="txt"> <a href="/comment/detail?comment_id='+n.comment_id+'" target="_blank"> '+n.comment_content+' </a> </div> <div class="comment-handler"> <a href="javascript:void(0);" data-commentid="'+n.comment_id+'" class="J_hasHelp "> <i class="iconfont">&#xe90a;</i>&nbsp; ',a+=n.up_num>0?' <span class="amount"> ':' <span class="amount hide"> ',a+=" "+n.up_num+' </span> </a> </div> <div class="comment-eval"> <i class="iconfont">&#x'+n.loveIcon+";</i> "+n.loveText+" </div></li>";return a}},function(t,a,e){var n=e(12),i=e(13),r=e(14),o=e(17),s=e(20);t.exports=function(t){function a(){Utils.getJsonp({url:e(b),callback:function(t){var a=t.data;x=a.page_total,_.html(""),x>0?(x>1&&m(),d(t.data),v()):c()}}),new r({$elem:f}),new o({container:f})}function e(t){var a=Utils.formParam(t),e=CommentUrl.comListUrl.indexOf("?")>-1?"&":"?";return CommentUrl.comListUrl+e+a}function c(){g.html('<p class="no-data">暂无数据</p>')}function l(t){t=t||1;var a=e(b);Utils.getJsonp({url:a,callback:function(t){0===t.code&&("[object Array]"===Object.prototype.toString.call(t.data)?m(!0):(x=t.data.page_total,x>1?m():m(!0),d(t.data)))}})}function m(t){w.css(t?{display:"none"}:{display:"block"})}function d(t){var a=t.comments;J=t.server_time;var e=[];for(var n in a)if(a.hasOwnProperty(n)){var r=a[n],o=Utils.getGradeInfo(r.total_grade)||{};r.check_time=parseInt(r.check_time),r.showTime=Utils.calShowTime(r.check_time||r.add_timestamp,J),r.loveText=o.loveText,r.loveIcon=o.loveIcon,e.push(r.comment_id),r.user_avatar||(r.user_avatar=Utils.randomHeadImg()),r.comment_content=Utils.dataToHtml(r.comment_content),u(r.user_replys)}if(a.length>0){var c=y(a);1===I?_.html(c):_.append(c),s.renderUpStatus({data:e,$elem:f,startIndex:(I-1)*b.pagesize}),i.reRenderImgSizeInComment(_,(I-1)*b.pagesize,I*b.pagesize),I===x&&m(!0)}else m(!0)}function u(t){for(var a in t)if(t.hasOwnProperty(a)){var e=t[a];e.user_avatar||(e.user_avatar=Utils.randomHeadImg(),e.reply_content=Utils.dataToHtml(e.reply_content))}}function v(){w.on("click",function(){I++,I>=x&&m(!0),b.pageindex=I,l(b.pageindex)}),f.on("click",".J_showImg",function(t){var a=$(t.currentTarget);a.toggleClass("cur"),b.showimg=0===b.showimg?1:0,b.pageindex=1,I=1,l()}),h.on("click",".item",function(t){var a=$(t.currentTarget);if(a.hasClass("cur"))return!1;a.addClass("cur").siblings(".item").removeClass("cur");var e=a.data("profileid");b.profile_id=e,b.pageindex=1,I=1,l()})}var p=t.goods_id||"",f=t.container||$(".J_commentCon"),h=t.navContainer||f.find(".J_nav"),g=f.find(".J_commentList"),_=g.find(".J_listBody"),w=g.find(".J_loadMore"),y=n;if(""===p)return!1;var x=0,I=1,J=null,b={goods_id:p,v_pid:t.v_id,orderby:1,showimg:0,profile_id:0,pagesize:5,pageindex:1};a()}},function(t,a){t.exports=function(t){var a="",e=t;if(e)for(var n,i=-1,r=e.length-1;r>i;){if(n=e[i+=1],a+='<li class="com-item J_resetImgCon J_canZoomBox" data-id=\''+n.comment_id+'\'> <a class="user-img" href="/comment/user?user_id='+n.user_id+'"> <img src="'+n.user_avatar+'"> </a> <div class="comment-info"> <a class="user-name" href="/comment/user?user_id='+n.user_id+'">'+n.user_name+'</a> <p class="time">'+n.showTime+'</p> </div> <div class="comment-eval"> <i class="iconfont">&#x'+n.loveIcon+";</i> "+n.loveText+' </div> <div class="comment-txt"> <a href="/comment/detail?comment_id='+n.comment_id+'" target="_blank">'+n.comment_content+" </a> </div> ",n.comment_images.length>0){a+=' <div class="m-img-list clearfix h-img-list"> ';var o="";a+=" ",1==n.comment_images.length&&(a+=" ",o="item-one",a+=" "),a+=" ";var s=n.comment_images;if(s)for(var c,l=-1,m=s.length-1;m>l;)c=s[l+=1],a+=' <div class="img-item img-item'+(l+1)+" "+o+'"> <img data-src="'+c+'" class="J_resetImgItem J_canZoom" data-index="'+l+'"> <div class="loader loader-gray"></div> </div> ';a+=' <div class="J_zoomImgList" style="display: none;"> ';var d=n.comment_images;if(d)for(var c,l=-1,u=d.length-1;u>l;)c=d[l+=1],a+=' <span data-src="'+c+'"></span> ';a+=" </div> </div> "}a+=' <div class="comment-handler"> <a href="javascript:;" data-commentid="'+n.comment_id+'" class="J_hasHelp ',n.up_status&&(a+="cur"),a+='"> <i class="iconfont">&#xe90a;</i>&nbsp; ',a+=n.up_num>0?' <span class="amount"> ':' <span class="amount hide"> ',a+=" "+parseInt(n.up_num)+' </span> </a> </div> <div class="comment-input"> <input type="text" placeholder="回复楼主" class="J_commentAnswerInput"> <a href="javascript:void(0);" class="btn  answer-btn J_commentAnswerBtn" data-commentid="'+n.comment_id+'">回复</a> </div> <div class="comment-answer"> ',n.reply_content&&(a+=' <div class="answer-item"> <img class="answer-img" src="//s01.mifile.cn/i/logo.png"> <div class="answer-content"> <h3 class="official-name">官方回复</h3> <p> '+n.reply_content+' <a href="javascript:void(0);" class="J_csLike ',n.customer_status&&(a+="current "),a+="\" data-commentid='"+n.comment_id+'\'> <i class="iconfont">&#xe90a;</i>&nbsp; ',a+=n.reply_up_num>0?' <span class="amount"> ':' <span class="amount hide"> ',a+=" "+n.reply_up_num+" </span> </a> </p> </div> </div> "),a+=" ";var v=n.user_replys;if(v)for(var p,f=-1,h=v.length-1;h>f;)p=v[f+=1],a+=' <div class="answer-item"> <a class="answer-img" href="/comment/user?user_id='+p.user_id+'"><img  src="'+p.user_avatar+'"></a> <div class="answer-content"> <h3 class="">'+p.user_name+"</h3> <p> "+p.reply_content+" </p> </div> </div> ";a+=" ",parseInt(n.user_reply_num)>3&&(a+=' <div class="comment-more"> <a class="show-more"  href="/comment/detail?comment_id='+n.comment_id+'" target="_blank">查看全部 <span>'+n.user_reply_num+"</span>条回复</a> </div> "),a+=' </div> <div class="J_canZoomData"> <div class="h-userInfo" data-username="'+n.user_name+'" data-showtime="'+n.showTime+'" data-txt="'+n.comment_content+'" data-avatar="'+n.user_avatar+'" data-upnum="'+parseInt(n.up_num)+'" data-commentid="'+n.comment_id+'" ></div> <div class="h-answerInfo"> ',n.reply_content&&(a+=' <div class="answer-item" data-name="官方回复" data-txt="'+n.reply_content+'" data-upnum="'+parseInt(n.reply_up_num)+'" data-office="true" > </div> '),a+=" </div> </div></li>"}return a}},function(t,a,e){var n=e(6),i={reRenderImgSizeInComment:function(t,a,e){for(var i=function(a){var e=a.i,n=a.b,i=a.img,r=t.find(".J_resetImgCon").eq(e),o=r.find(".J_resetImgItem").eq(n),s=o.data("src"),c=o.parent().width(),l=parseInt(i.width),m=parseInt(i.height);if(l>m){o.css({height:c+"px"});var d=l*c/m;o.css({marginLeft:"-"+(d-c)/2+"px"})}else{o.css({width:c+"px"});var u=m*c/l;o.css({marginTop:"-"+(u-c)/2+"px"})}o.attr("src",s),o.attr("data-width",l),o.attr("data-height",m),o.parent().addClass("showimg")},r=function(t,a){a.find(".J_resetImgItem").each(function(a){var e=$(this).data("src"),r={i:t,b:a,imgsrc:e};n.imgLoad(r,i)})},o=a;a+e>o;o++){var s=t.find(".J_resetImgCon").eq(o);r(o,s)}}};t.exports=i},function(t,a,e){var n=e(15),i=e(16);t.exports=function(t){function a(){s(),d=$("#J_commentModal"),e()}function e(){m.on("click","."+l.btnName,function(t){var a=$(t.currentTarget);if(!Utils.isLogin())return Utils.login(),!1;var e=a.siblings("."+l.inputName),n=$.trim(e.val()),i=Utils.revertStr(n),s=$.cookie("userId"),c=a.data("commentid"),m=CommentUrl.addAnswerUrl+"?comment_id="+c+"&parent_id=0&content="+i+"&user_id="+s;if(n){if(n.length>140)return o("字数不能超过140"),!1;Utils.getJsonp({url:m,callback:function(t){var i="发表成功，请等待审核";0!==t.code&&(i=t.description,o(i)),e.val("");var s={reply_content:Utils.dataToHtml(n),user_name:t.data.user_name||"",user_avatar:t.data.user_avatar||Utils.randomHeadImg()};r(s,a.parent().siblings(".comment-answer"))}})}else o("输入不能为空")})}function r(t,a){var e=i([t]),n=a.find(".comment-more");n.get(0)?n.before(e):a.append(e)}function o(t){d.modal("show").find(".tit").html(t)}function s(){var t=$("#J_commentModal").get(0);t&&t.remove(),$("body").append(n())}var c={$elem:$("body"),inputName:"J_commentAnswerInput",btnName:"J_commentAnswerBtn",error:function(){},callback:function(){}},l=$.extend(!0,c,t),m=l.$elem,d=null;a()}},function(t,a){t.exports=function(t){var a='<div class="modal fade modal-hide comment-modal" id="J_commentModal" > <a class="close" data-dismiss="modal"  href="javascript: void(0);"><i class="iconfont">&#xe602;</i></a> <div class="modal-body"> <div class="txt"> <h2 class="tit"></h2> </div> <a href="javascript: void(0);" class="btn btn-primary" data-dismiss="modal">确定</a> </div></div>';return a}},function(t,a){t.exports=function(t){var a="",e=t;if(e)for(var n,i=-1,r=e.length-1;r>i;)n=e[i+=1],a+='<div class="answer-item"> <img class="answer-img" src="'+n.user_avatar+'"> <div class="answer-content"> <h3 class="">'+n.user_name+"</h3> <p> "+n.reply_content+" </p> </div></div>";return a}},function(t,a,e){var n=e(18),i=e(13),r=e(19);t.exports=function(t){function a(){e()}function e(){c.on("click",".J_canZoom",function(t){var a=$(t.currentTarget);l=a.data("index"),o(a)})}function o(t){t=t||$(".J_canZoom");var a=t.parents(".J_canZoomBox"),e=a.find(".J_zoomImgList").find("span"),n=[],i={},r=a.find(".J_canZoomData"),o=r.find(".h-userInfo"),c=r.find(".h-answerInfo .answer-item"),l=[];i=o.data();for(var m=0,d=c.length;d>m;m++)l.push(c.eq(m).data());i.reply=l;for(var u=0;u<e.length;u++){var v=$(e[u]).data("src");v&&n.push(v)}i.commentImgList=n,s(i)}function s(t){var a=$("#J_photoModal");a.get(0)&&a.remove(),$("body").append(n(t)),i.reRenderImgSizeInComment($("#J_photoModal"),0,1),new r({container:$("#J_photoModal"),willShow:!0,curIndex:l})}var c=t.container||$("body"),l=0;a()}},function(t,a){t.exports=function(t){var a="",e=t;if(a+='<div class="modal fade modal-hide photoShow-modal" id="J_photoModal" > <a class="close" data-dismiss="modal"  href="javascript: void(0);"></a> <div class="photo-box J_photoImgWrap"> <div class="photo-img-wrap"> <div class="J_bigImg bigImg"> <img class="J_zoomBigImg"> </div> <div class="photo-control J_zoomControl"> <a href="javascript:;" class="control-btn pre" data-index="-1" title="上一张"> </a> <a href="javascript:;" class="control-btn next" data-index="1" title="下一张"> </a> </div> <div class="rotate-forward J_zoomRotate"> <a href="javascript:;" class="btn-left" data-index="-1" title="向左旋转"></a> <a href="javascript:;" class="btn-right" data-index="1" title="向右旋转"></a> </div> </div> <div class="m-comment-area"> <div class="user-info"> <a class="user-ava" href="javascript:;"> <img src="'+e.avatar+'"> </a> <p class="name">'+e.username+'</p> <div class="time">'+e.showtime+'</div> </div> <div class="txt"> '+e.txt+" </div> ",e.commentImgList.length>0){a+=' <div class="img-list m-img-list J_resetImgCon J_smlNav clearfix"> ';var n=e.commentImgList;if(n)for(var i,r=-1,o=n.length-1;o>r;)i=n[r+=1],a+=' <div class="img-item img-item'+(r+1)+' J_zoomSmlImg"> <img data-src="'+i+'" class="J_resetImgItem"> <div class="loader loader-gray"></div> </div> ';a+=" </div> "}return a+=' <div class="comment-handler"> <a href="javascript:void(0);" data-commentid="'+e.commentid+'" class="J_hasHelp"> <i class="iconfont">&#xe90a;</i>&nbsp; ',a+=e.upnum>0?' <span class="amount"> ':' <span class="amount hide"> ',a+=" "+e.upnum+" </span> </a> </div> ",e.reply.length>0&&(a+=' <div class="answer-area"> <p class="office">官方回复</p> <div class="txt"> '+e.reply[0].txt+' <a href="javascript:void(0);" class="J_csLike " data-commentid="'+e.commentid+'"> <i class="iconfont">&#xe90a;</i>&nbsp; ',a+=e.reply[0].upnum>0?' <span class="amount"> ':' <span class="amount hide"> ',a+=" "+e.reply[0].upnum+" </span> </a> </div> </div> "),a+=" </div> </div></div>"}},function(t,a){function e(t){function a(){e(),n();var t=h.find(".J_zoomSmlImg");t.length<=1&&g.addClass("hide"),t.eq(k).addClass("current"),b&&v.modal({keyboard:!1,show:!0}),r()}function e(){var t=$(window).width(),a=$(window).height(),e={};if(U>t||T>a)e={w:U-C,h:T};else{var n=Math.min(t,j),r=Math.min(a,L),o=Math.min(n,r),s=Math.abs(t-a);C>s&&(o-=C-s),e={w:o,h:o}}i(e)}function n(){var t=h.find(".J_zoomSmlImg").eq(k),a=t.find("img").data("src");m(a)}function i(t){var a=t.w-2*S,e=t.h-2*S;v.css({width:a+C,height:e,marginTop:-(e/2),marginLeft:-(a+C)/2}),p.css({width:a,height:e})}function r(){$(window).off("resize").on("resize",function(){e(),d(),s(x)}),h.off().on("click",".J_zoomSmlImg",function(t){var a=$(t.currentTarget),e=a.find("img").attr("src");return a.hasClass("current")?!1:(x=0,a.addClass("current").siblings(".img-item").removeClass("current"),void m(e))}),g.off().on("click","a",function(t){var a=$(t.currentTarget),e=parseInt(a.data("index"));o(e)}),y.off().on("click","a",function(t){var a=$(t.currentTarget),e=parseInt(a.data("index"));x+=e,s(x)}),$("body").off("keyup").on("keyup",function(t){var a=t||event,e=a.keyCode||a.which||a.charCode;switch(e){case 27:l();break;case 37:o(-1);break;case 39:o(1)}})}function o(t){if(g.hasClass("hide"))return!1;var a=t||-1,e=h.find(".current").index();x=0,e+=a,e>I-1&&(e=0),0>e&&(e=I-1),w.removeClass("current").eq(e).addClass("current");var n=w.eq(e).find("img").data("src");m(n)}function s(t){var a=f.get(0),e=90*t;c(a,"rotate("+e+"deg)")}function c(t,a){t.style.webkitTransform=a,t.style.MozTransform=a,t.style.msTransform=a,t.style.OTransform=a,t.style.transform=a}function l(){v.find(".close").trigger("click")}function m(t){f.css({display:"none"}),_.css({display:"block"}),J=new Image,J.onload=function(){var a=u(J);f.attr({src:t,style:a}),f.css({display:"block"}),_.css({display:"none"})},J.src=t}function d(){f.attr({style:u(J)})}function u(t){var a=t.width,e=t.height,n=p.width(),i=p.height(),r="";if(n>a&&i>e){var o=(i-e)/2;r="margin-top:"+o+"px"}else{var s=parseInt(n*e/a);if(i>s){var c=(i-s)/2;r="width:"+n+"px;margin-top:"+c+"px"}else r="height:"+i+"px"}return r}var v=t.container||$(".J_magnifierModal"),p=v.find(".J_photoImgWrap"),f=v.find(".J_zoomBigImg"),h=v.find(".J_smlNav"),g=v.find(".J_zoomControl"),_=v.find(".loadng"),w=h.find(".img-item"),y=v.find(".J_zoomRotate"),x=0,I=w.length,J=null,b=t.willShow||!1,k=t.curIndex||0,C=330,U=550+C,T=550,j=960+C,L=960,S=30;a()}t.exports=e},function(t,a,e){var n=e(6);t.exports={renderUpStatus:function(t){function a(t){t=t||{};var a=i.find("li");o>0&&(a=i.find("li").eq(o).nextAll()),a.each(function(){var a=$(this),e=a.data("id");if(t[e]){var n=t[e],i=a.find(".J_hasHelp"),r=i.find(".amount");n.up?(i.addClass("cur"),i.find(".amount").html(n.num_info.up_num),n.num_info.up_num>0&&r.removeClass("hide")):i.removeClass("cur"),n.customer&&a.find(".J_csLike").addClass("cur")}})}var e=t.data||[],i=t.$elem||$("body"),r=e.join(","),o=t.startIndex;n.getJsonp({url:CommentUrl.checkUpUrl+"?comment_ids="+r,callback:function(t){0===t.code&&a(t.data)}})}}},function(t,a,e){var n=e(20);t.exports=function(t){function a(){e()}function e(){if(0===i.code){var t=i.data.addtime_comments,a=i.data.server_time;for(var e in t)if(t.hasOwnProperty(e)){var c=t[e],l=Utils.getGradeInfo(c.total_grade)||{};s.push(c.comment_id),c.loveText=l.loveText,c.loveIcon=l.loveIcon,c.showTime=Utils.calShowTime(c.check_time||c.add_timestamp,a),c.user_avatar||(c.user_avatar=Utils.randomHeadImg()),c.comment_content=Utils.dataToHtml(c.comment_content)}r.html(o(t)),n.renderUpStatus({data:s,$elem:r,startIndex:0})}else r.html('<div class="no-data">暂无数据</div>')}var i=t.data||{},r=t.container||$("body"),o=t.temp||"",s=[];a()}}]);